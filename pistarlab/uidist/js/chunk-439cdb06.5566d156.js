(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-439cdb06"],{"3fc0":function(t,e,n){"use strict";var a=n("cb77"),i=n.n(a);i.a},"4df4":function(t,e,n){"use strict";var a=n("0366"),i=n("7b0b"),s=n("9bdd"),o=n("e95a"),r=n("50c4"),l=n("8418"),c=n("35a1");t.exports=function(t){var e,n,u,d,p,m,b=i(t),h="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,v=void 0!==g,_=c(b),y=0;if(v&&(g=a(g,f>2?arguments[2]:void 0,2)),void 0==_||h==Array&&o(_))for(e=r(b.length),n=new h(e);e>y;y++)m=v?g(b[y],y):b[y],l(n,y,m);else for(d=_.call(b),p=d.next,n=new h;!(u=p.call(d)).done;y++)m=v?s(d,g,[u.value,y],!0):u.value,l(n,y,m);return n.length=y,n}},"89be":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"page-content"},[n("b-modal",{attrs:{id:"agent-browser",size:"lg",title:"File Data Browser",scrollable:"","hide-footer":!0}},[n("DataBrowser",{attrs:{path:"/agent/"+t.item.ident}}),n("div",{staticClass:"mb-5"})],1),n("h1",[n("i",{staticClass:"fas fa-robot"}),t._v(" Agent: "),t.item&&t.item.name?n("span",[t._v(t._s(t.item.name))]):n("span",[t._v(t._s(t.item.ident))])]),t.item&&t.item.ident?n("div",[n("b-modal",{attrs:{id:"edit-modal",size:"xl","hide-footer":!0,title:"Edit Agent"}},[n("AgentEdit",{attrs:{uid:t.uid},on:{updated:function(e){return t.configUpdated()}}})],1),n("b-modal",{attrs:{id:"meta-modal",size:"lg"}},[t.item&&t.item.meta?n("pre",[t._v(t._s(JSON.parse(t.item.meta)))]):t._e()]),n("b-modal",{attrs:{id:"modal-create-snapshot",scrollable:"",title:"Create Snapshot",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.ok;return[n("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return a()}}},[t._v("Close")])]}}],null,!1,3435803637)},[n("b-form-group",[n("label",{attrs:{for:"snapshot_version"}},[t._v("Version: (Must be unique, otherwise will overwrite snapshots with same version)")]),n("b-form-input",{attrs:{id:"snapshot_version",placeholder:"Enter the snapshot version.",trim:""},model:{value:t.snapshot_version,callback:function(e){t.snapshot_version=e},expression:"snapshot_version"}}),n("div",{staticClass:"mt-1"}),n("label",{attrs:{for:"snapshot_description"}},[t._v("Description:")]),n("b-form-input",{attrs:{id:"snapshot_description",placeholder:"Enter the snapshot description",trim:""},model:{value:t.snapshot_description,callback:function(e){t.snapshot_description=e},expression:"snapshot_description"}}),n("div",{staticClass:"mt-4"}),n("b-form-checkbox",{attrs:{disabled:"!shared.state.loggedIn",name:"checkbox-1",value:!0,"unchecked-value":!1},model:{value:t.publish,callback:function(e){t.publish=e},expression:"publish"}},[t._v(" Publish to Community Hub ")]),t.shared.state.loggedIn?t._e():n("b-alert",{staticClass:"mt-4 d-inline-block",attrs:{variant:"warning",show:""}},[t._v(" Must be "),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.profile",modifiers:{profile:!0}}],staticStyle:{color:"white","text-decoration":"underline"},attrs:{size:"sm",title:"Signed in"}},[t._v("Signed in")]),t._v(" publish to community hub. ")],1),n("div",{staticClass:"mt-4"}),t.submitting?n("b-button",{attrs:{variant:"primary",disabled:""}},[n("b-spinner",{attrs:{small:"",type:"grow"}})],1):n("b-button",{staticClass:"mt-2",attrs:{disabled:t.submitting,variant:"primary",size:"sm"},on:{click:function(e){return t.createSnapshot()}}},[t._v("Create")]),t.publishError?n("b-alert",{attrs:{show:""}},[t._v(t._s(t.publishError))]):t._e()],1),n("hr"),n("div",{staticClass:"mt-2"}),n("b-card",[n("h3",[t._v("Current Snapshots")]),n("b-link",{staticClass:"small",on:{click:function(t){return this.loadSnapshotList()}}},[t._v("(refresh)")]),n("div",{staticClass:"mt-2"}),n("b-table",{attrs:{items:t.snapshots,fields:t.pubfields}}),null==t.snapshots||0==t.snapshots.length?n("div",[t._v(" No snapshots found for this agent. ")]):t._e()],1)],1),n("b-modal",{attrs:{id:"modal-create-clone",title:"Create Clone"}},[n("p",[t._v(" Cloned agents will not include session history or statistics. ")]),t.submitting?n("b-button",{attrs:{variant:"primary",disabled:""}},[n("b-spinner",{attrs:{small:"",type:"grow"}})],1):n("b-button",{attrs:{disabled:t.submitting},on:{click:function(e){return t.createClone()}}},[t._v("Create Full Clone")]),n("br"),n("br"),n("div",{staticClass:"text-center"},[t.clonedAgentId?n("b-button",{key:t.$route.path,staticClass:"ml-2",attrs:{to:"/agent/view/"+t.clonedAgentId},on:{click:function(e){t.clonedAgentId=null,t.graphList=[],t.$bvModal.hide("modal-create-clone")}}},[t._v(" Agent Clone Id: "+t._s(t.clonedAgentId)+" ")]):n("span",[t._v("...")])],1)],1),n("div",{staticClass:"mt-4"}),n("b-button-toolbar",[n("b-button-group",[n("b-button",{attrs:{variant:"primary",to:"/task/new/agenttask/?agentUid="+t.uid,size:"sm"}},[n("i",{staticClass:"fa fa-plus-square"}),t._v(" Assign Task")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-modal",expression:"'edit-modal'"}],attrs:{variant:"secondary",size:"sm"}},[n("i",{staticClass:"fa fa-edit"}),t._v(" Configure")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-create-clone",expression:"'modal-create-clone'"}],attrs:{title:"Create Clone",variant:"secondary",size:"sm"}},[n("i",{staticClass:"fa fa-clone"}),t._v(" Clone")]),t.item.job_data&&"RUNNING"==t.item.job_data.state?n("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:function(e){return t.agentControl("SHUTDOWN")}}},[t._v("Shutdown")]):t._e(),t.item.job_data&&"RUNNING"==t.item.job_data.state?n("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.agentControl("KILL")}}},[t._v("Kill")]):t._e(),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.agent-browser",modifiers:{"agent-browser":!0}}],attrs:{variant:"secondary",size:"sm"}},[n("i",{staticClass:"fa fa-file"}),t._v(" Files")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"meta-modal",expression:"'meta-modal'"}],attrs:{variant:"secondary",size:"sm"}},[n("i",{staticClass:"fa fa-info-circle"}),t._v(" Metadata")]),t.item&&!t.item.archived?n("b-button",{attrs:{variant:"warning",title:"Move to archive",size:"sm"},on:{click:function(e){return t.updateArchive(!0)}}},[n("i",{staticClass:"fa fa-trash"}),t._v(" Archive")]):t._e(),t.item&&t.item.archived?n("b-button",{attrs:{title:"restore from archive",variant:"secondary",size:"sm"},on:{click:function(e){return t.updateArchive(!1)}}},[n("i",{staticClass:"fa fa-trash-restore"}),t._v(" Restore")]):t._e()],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-create-snapshot",expression:"'modal-create-snapshot'"}],staticClass:"ml-3",attrs:{title:"Create Snapshot",variant:"info",size:"sm"},on:{click:function(e){return t.loadSnapshotList()}}},[n("i",{staticClass:"fa fa-camera-retro"}),t._v(" Publish Snapshot")])],1),n("div",{staticClass:"mt-4"}),n("b-modal",{attrs:{id:"errorbox",size:"xl"}},[null!=t.error?n("b-alert",{attrs:{show:"",variant:"danger"}},[n("pre",[t._v(t._s(t.error))]),n("pre",[t._v(t._s(t.traceback))])]):t._e()],1),t.item?n("AgentCard",{attrs:{agent:t.item},on:{update:function(e){return t.refetch()}}}):t._e(),n("hr"),n("div",{staticClass:"mt-4"}),n("h3",[t._v("Session History")]),n("div",{staticClass:"mt-4 mb-4"},[t._v(" Total Steps Experienced: "+t._s(t.lifeSteps)+" ")]),n("div",{staticStyle:{display:"block",position:"relative",height:"280px",overflow:"auto"}},[n("b-button",{attrs:{disabled:t.selected.length<=1,variant:"info",size:"sm"},on:{click:t.runCompare}},[n("span",[t._v("Compare: "+t._s(t.selected.length))])]),n("b-form-checkbox-group",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("b-table",{attrs:{"show-empty":"","empty-text":"No Sessions Found",hover:"","table-busy":"",items:t.rowData,fields:t.fields,dark:!1,small:!1,borderless:!1,sortBy:"created",sortDesc:!0},scopedSlots:t._u([{key:"cell(selector)",fn:function(t){return[n("b-form-checkbox",{attrs:{value:t.item.ident}})]}},{key:"cell(parentlink)",fn:function(e){return[n("router-link",{attrs:{to:"/session/view/"+e.item.parentSessionId}},[t._v(t._s(e.item.parentSessionId))])]}},{key:"cell(link)",fn:function(e){return[n("router-link",{attrs:{to:"/session/view/"+e.item.ident}},[t._v(t._s(e.item.ident))])]}},{key:"cell(status)",fn:function(e){return[n("span",[t._v(t._s(e.item.status))]),e.item.status&&"RUNNING"==e.item.status?n("b-button",{staticClass:"ml-1",attrs:{variant:"danger",size:"sm"},on:{click:function(n){return t.stopSession(e.item.task.ident)}}},[t._v("Abort")]):t._e()]}},{key:"cell(steps)",fn:function(e){return[e.item.summary.step_count?n("span",[t._v(t._s(e.item.summary.step_count.toLocaleString("en-US",{useGrouping:!0})))]):t._e()]}},{key:"cell(episodes)",fn:function(e){return[e.item.summary.episode_count?n("span",[t._v(t._s(e.item.summary.episode_count.toLocaleString("en-US",{useGrouping:!0})))]):t._e()]}},{key:"cell(runtime)",fn:function(e){return[e.item.summary.runtime?n("span",[t._v(t._s(e.item.summary.runtime.toLocaleString("en-US",{useGrouping:!0})))]):t._e()]}}],null,!1,321952242)})],1)],1),n("div",{staticClass:"mt-4"}),n("hr"),n("h3",[t._v("Statistics")]),n("hr"),n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("b-form-group",{attrs:{label:"History"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.ariaDescribedby;return[n("b-form-radio-group",{attrs:{options:t.plotStepMaxOptions,"aria-describedby":a,"button-variant":"secondary",size:"sm",name:"radio-btn-outline",buttons:""},on:{click:function(e){return t.loadGraphs()}},model:{value:t.plotStepMax,callback:function(e){t.plotStepMax=e},expression:"plotStepMax"}}),n("span",[t._v(" Showing steps: "+t._s(t.plot_total_count-t.plot_actual_count)+" to "+t._s(t.plot_total_count))])]}}],null,!1,3519009248)})],1),n("b-col",[n("b-form-group",{staticClass:"pull-right",attrs:{label:"Bin Size"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.ariaDescribedby;return[n("b-form-radio-group",{attrs:{options:t.plotBinSizeOptions,"aria-describedby":a,"button-variant":"secondary",size:"sm",name:"radio-btn-outline",buttons:""},on:{click:function(e){return t.loadGraphs()}},model:{value:t.plotBinSize,callback:function(e){t.plotBinSize=e},expression:"plotBinSize"}})]}}],null,!1,1351642608)})],1)],1),n("div",{staticClass:"mt-4"}),n("b-row",[t._l(t.graphList,(function(e){return n("b-col",{key:e.key,attrs:{cols:"3"}},[e.data&&e.layout&&e.data.length>0&&e.data[0]&&e.data[0].x.length>0?n("div",[n("PlotlyVue",{attrs:{bgcolor:"#000",data:e.data,layout:e.layout,"display-mode-bar":!1}})],1):t._e()])})),0==t.graphList.length?n("b-col",[t._v(" No log data found ")]):t._e()],2)],1)],1):t._e()],1),n("HelpInfo",{attrs:{contentId:"agents"}})],1)},i=[],s=(n("99af"),n("4160"),n("a15b"),n("b64b"),n("d3b7"),n("25f0"),n("159b"),n("b85c")),o=n("8785"),r=n("bc3a"),l=n.n(r),c=n("4023"),u=n("bbd0"),d=n("9530"),p=n.n(d),m=n("04d1"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("div",{staticClass:"text-center mt-4"},[n("b-card-img",{staticStyle:{"max-width":"320px"},attrs:{src:"/img/agent_spec_icons/agent_"+t.getImageId(t.agent.specId)+".png",alt:"Image"}})],1),n("div",{staticClass:"ml-4 mt-4"},[n("div",[n("b-modal",{attrs:{id:"edit-tags",title:"edit tags","hide-footer":!0}},[n("b-input-group",[n("b-input",{staticStyle:{width:"50px"},attrs:{placeholder:"Enter a tag"},model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}}),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit-tags",arg:"edit-tags"}],staticClass:"ml-2",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.modifyTag("add",t.newTag)}}},[t._v("Add")])],1),n("div",{staticClass:"mt-2"},t._l(t.tagList,(function(e,a){return n("span",{key:a,staticClass:"mr-2",attrs:{variant:"tag"}},[t._v(" "+t._s(e)+" ("),n("b-link",{on:{click:function(n){return t.modifyTag("remove",e)}}},[t._v("remove")]),t._v(") "),a!=t.tagList.length-1?n("span",[t._v(", ")]):t._e()],1)})),0)],1),t._v(" Tags: "),t._l(t.tagList,(function(e,a){return n("b-badge",{key:a,staticClass:"mr-1",attrs:{pill:"",variant:"tag"}},[t._v(t._s(e))])})),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal:edit-tags",arg:"edit-tags"}],attrs:{variant:"white",size:"sm"}},[n("i",{staticClass:"fa fa-edit"})])],2),n("div",{staticClass:"mt-2"},[n("b-modal",{attrs:{id:"edit-notes",title:"edit notes"},on:{ok:function(e){return t.updateNotes()}}},[n("b-input-group",[n("b-textarea",{attrs:{placeholder:"Notes"},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1)],1),t._v(" Notes: "),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal:edit-notes",arg:"edit-notes"}],attrs:{variant:"white",size:"sm"},on:{click:function(e){return t.loadNotes()}}},[n("i",{staticClass:"fa fa-edit"})]),n("p",[t._v(t._s(t.agent.notes))])],1)])]),n("b-col",[n("div",[n("h4",[t._v("Agent Details")]),n("b-modal",{attrs:{id:"agentname",size:"lg",title:"Update Agent Name"},on:{ok:function(e){return t.updateName()}}},[n("p",[t._v(" Agent names should to be human readable and used to help organize your agents. Note they do not need to be unique. ")]),n("b-form-input",{staticStyle:{width:"250px"},attrs:{placeholder:"Enter an agent name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("div",{staticClass:"data_label mt-2"},[t._v("Name: ")]),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal:agentname",arg:"agentname"}],attrs:{variant:"white",size:"sm"},on:{click:function(e){return t.loadName()}}},[t.agent.name?n("span",[t._v(t._s(t.agent.name))]):n("span",[t._v("None")])]),n("div",{staticClass:"data_label mt-2"},[t._v("Id: ")]),t._v(t._s(t.agent.ident)+" "),n("div",{staticClass:"data_label mt-2"},[t._v("Spec Id: ")]),n("b-link",{attrs:{target:"_blank",to:"/agent_spec/"+t.agent.specId}},[t._v(t._s(t.agent.spec.displayedName))]),n("div",{staticClass:"data_label mt-2"},[t._v("Seed: ")]),t._v(" "+t._s(t.agent.seed)+" "),n("div",{staticClass:"data_label mt-2"},[t._v("Created: ")]),t._v(t._s(t.agent.created)+" "),n("div",{staticClass:"data_label mt-2"},[t._v("Last Checkpoint Id: ")]),t._v(t._s(t.lastCheckpoint)+" ")],1)]),n("b-col",[n("span",{staticClass:"h4",attrs:{id:"interface_label"}},[t._v("Agent Interfaces")]),n("b-modal",{attrs:{id:"helpinfo-modal",title:"Help",size:"lg","ok-only":""}},[n("HelpInfo",{attrs:{contentId:"agent_interface",fullPage:!0}})],1),n("span",{staticClass:"ml-2 text-right"},[n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"helpinfo-modal",expression:"'helpinfo-modal'"}],staticStyle:{color:"white"}},[n("i",{staticClass:"fa fa-question-circle"})])],1),n("div",{staticClass:"mt-2"},t._l(t.config.interfaces,(function(e,a){return n("div",{key:a},[n("span",[n("h6",[t._v(t._s(a))])]),n("div",{staticClass:"ml-2"},[n("div",{staticClass:"data_label mt-1"},[t._v("Observation Space: ")]),e&&e.observation_space?n("div",{staticClass:"ml-1"},[n("SpaceInfo",{attrs:{space:e.observation_space}})],1):n("div",[t._v("Unassigned")]),n("div",{staticClass:"data_label mt-1"},[t._v("Action Space: ")]),e&&e.action_space?n("div",{staticClass:"ml-1"},[n("SpaceInfo",{attrs:{space:e.action_space}})],1):n("div",[t._v("Unassigned")])])])})),0)],1),n("b-col",[n("h4",[t._v("Agent Components")]),n("div",[t._l(t.components,(function(e,a){return n("div",{key:a},[t._v(" - "+t._s(e)+" ")])})),0==t.components.length?n("div",[t._v(" No components used ")]):t._e()],2)])],1)],1)],1)},h=[],f=(n("d81d"),n("b0c0"),n("9b39"));function g(){var t=Object(o["a"])(["mutation noteMutation($id:String!,$notes:String!) \n                {\n                    agentSetNotes(id:$id, notes:$notes){\n                        success\n                        }\n                }"]);return g=function(){return t},t}function v(){var t=Object(o["a"])(["mutation nameMutation($id:String!,$name:String!) \n                {\n                    agentSetName(id:$id, name:$name){\n                        success\n                        }\n                }"]);return v=function(){return t},t}var _={components:{SpaceInfo:f["a"]},props:{agent:Object},data:function(){return{componentFields:[{key:"name",label:"Name"},{key:"specId",label:"Spec Id"},{key:"spec.category",label:"Type"}],newTag:"",notes:"",name:null}},mounted:function(){},methods:{loadNotes:function(){this.notes=this.agent.notes},loadName:function(){this.name=this.agent.name},updateName:function(){var t=this;this.$apollo.mutate({mutation:p()(v()),variables:{id:this.agent.id,name:this.name}}).then((function(e){t.$emit("update")})).catch((function(t){console.error(t)}))},updateNotes:function(){var t=this;this.$apollo.mutate({mutation:p()(g()),variables:{id:this.agent.id,notes:this.notes}}).then((function(e){t.$emit("update")})).catch((function(t){console.error(t)}))},modifyTag:function(t,e){var n=this;l.a.get("".concat(c["a"].API_URL,"/api/agent/").concat(t,"/tag/").concat(this.agent.ident,"/").concat(e)).then((function(t){console.log("Here we are"),n.$emit("update")})).catch((function(t){console.log(t),n.error=t}))}},computed:{tagList:function(){return null==this.agent?[]:this.agent.tags.edges.map((function(t){return t.node.tagId}))},lastCheckpoint:function(){return this.agent&&this.agent.lastCheckpoint?JSON.parse(this.agent.lastCheckpoint).id:"NA"},components:function(){var t=[];if(null==this.agent.components)return t;var e,n=Object(s["a"])(this.agent.components.edges);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.node)}}catch(i){n.e(i)}finally{n.f()}return t},config:function(){return JSON.parse(this.agent.config)},meta:function(){return JSON.parse(this.agent.meta)}},created:function(){},beforeDestroy:function(){}},y=_,S=(n("e987"),n("2877")),k=Object(S["a"])(y,b,h,!1,null,"55574849",null),C=k.exports,w=n("6906"),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.agentSpec?n("div",[t.$apollo.queries.agent.loading?t._e():n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("div",[n("b-tabs",{attrs:{"content-class":"mt-3",justified:""}},[n("b-tab",{attrs:{title:"Edit with Agent Builder"}},[t.params?n("div",[n("div",{staticClass:"ml-3"},[n("ParamEditor",{attrs:{params:t.params,values:t.initParamValues},on:{update:function(e){t.paramValues=e}}})],1)]):n("div",[t._v(" Agent Builder not supported by this Agent Spec ")])]),n("b-tab",{attrs:{title:"Edit raw config"}},[t.config?n("editor",{attrs:{lang:"json",width:"100%",theme:"chrome",height:"600"},on:{init:t.editorInit},model:{value:t.config,callback:function(e){t.config=e},expression:"config"}}):t._e(),n("div",{staticClass:"mt-4"})],1)],1)],1)])],1),n("div",{staticClass:"mt-4"})],1),n("b-button-toolbar",[t.submitting?n("b-button",{staticClass:"ml-auto",attrs:{size:"sm",variant:"primary",disabled:""}},[n("b-spinner",{attrs:{small:"",type:"grow"}}),t._v("Processing... ")],1):n("b-button",{staticClass:"ml-auto",attrs:{size:"sm",variant:"primary"},on:{click:t.submit}},[t._v("Save")])],1),n("div",{staticClass:"mt-4"}),t.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.errorMessage)+": "),n("pre",{staticStyle:{"background-color":"inherit"}},[t._v(t._s(t.traceback))])]):t._e()],1):t._e()},I=[],N=n("5530"),A=n("321f");function $(){var t=Object(o["a"])(["mutation agentConfigMutation($id:String!,$config:String!) \n                {\n                    agentSetConfig(id:$id, config:$config){\n                        success\n                        }\n                }"]);return $=function(){return t},t}function z(){var t=Object(o["a"])(["\n  query GetAgent($ident: String!) {\n    agent(ident: $ident) {\n      id\n      ident\n      config\n      spec{\n        id\n        ident\n        description\n        extensionId\n        version\n        config\n        params\n      }\n    }\n  }\n"]);return z=function(){return t},t}function O(){var t=Object(o["a"])(["\n  query GetAgentSpec($ident: String!) {\n    agentSpec(ident: $ident) {\n      id\n      ident\n      description\n      extensionId\n      version\n      config\n      params\n    }\n  }\n"]);return O=function(){return t},t}p()(O());var E=p()(z()),L={name:"EditAgent",components:{editor:n("7c9e"),ParamEditor:A["a"]},apollo:{agent:{query:E,variables:function(){return{ident:this.uid}}}},data:function(){return{agent:{},options:{},config:"",code:"",paramValues:{},submitting:!1,snapshotId:null,snapshot_version:"0",snapshot_description:"",errorMessage:null}},props:{uid:String},computed:{agentSpec:function(){return this.agent.spec?this.agent.spec:null},params:function(){return this.agentSpec?JSON.parse(this.agentSpec.params):null},initParamValues:function(){return this.config&&""!=this.config?JSON.parse(this.config):{}}},methods:{editorInit:function(){n("2099"),n("be9d"),n("818b"),n("0329"),n("95b8"),n("79fb"),n("6a21")},cancel:function(){},onError:function(){},selectSnapshot:function(t){this.$bvModal.hide("modal-selectsnapshot"),this.snapshotId=t},submit:function(){var t=this;this.submitting=!0,this.config=JSON.stringify(Object(N["a"])(Object(N["a"])({},JSON.parse(this.config)),this.paramValues),null,2),this.$apollo.mutate({mutation:p()($()),variables:{id:this.agent.id,config:this.config}}).then((function(e){console.log("Submitted"),t.submitting=!1,t.$emit("updated")})).catch((function(e){t.submitting=!1,console.error(e)}))}},watch:{agent:function(t){this.agent=t,this.agent.config&&(this.config=JSON.stringify(JSON.parse(this.agent.config),null,2))}},created:function(){}},j=L,M=(n("e838"),Object(S["a"])(j,x,I,!1,null,"2da38830",null)),T=M.exports;function U(){var t=Object(o["a"])(["mutation archiveMutation($id:String!,$archive:Boolean!) \n                {\n                    agentSetArchive(id:$id, archive:$archive){\n                        success\n                        }\n                }"]);return U=function(){return t},t}function P(){var t=Object(o["a"])(["\n  query GetAgent($ident: String!) {\n    item: agent(ident: $ident) {\n      id\n      ident\n      seed\n      name\n      specId\n      spec{\n          id\n          ident\n          displayedName\n      }\n      config\n      meta\n      created\n      notes\n      archived\n      tags{\n          edges{\n              node{\n                  id\n                  tagId\n              }\n          }\n      }\n      lastCheckpoint\n      components{\n        edges{\n          node{\n            ident\n            name\n            specId\n            spec{\n              ident\n              category\n            }\n          }\n        }\n      }\n      sessions(first: 100) {\n        pageInfo {\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n            ident\n            envSpecId\n            task {\n              ident\n            }\n            sessionType\n            created\n            status\n            statusTimestamp\n            archived\n            summary \n            parentSessionId\n          }\n        }\n      }\n    }\n  }\n"]);return P=function(){return t},t}var B=[{key:"selector",label:"",sortable:!1},{key:"link",label:"Session",sortable:!1},{key:"parentlink",label:"Parent",sortable:!0},{key:"envSpecId",label:"Environment"},{key:"sessionType",label:"Session Type"},{key:"status",label:"Status",sortable:!0},{key:"runtime",label:"Run Time (Sec)",sortable:!0},{key:"steps",label:"Total Steps",sortable:!0},{key:"episodes",label:"Completed Episodes",sortable:!0}],D=[{key:"snapshot_version",label:"Version"},{key:"creation_time",label:"Created"},{key:"snapshot_description",label:"Description"},{key:"published",label:"Shared"}],J=p()(P()),R={name:"Agent",components:{AgentCard:C,AgentEdit:T,PlotlyVue:m["Plotly"],DataBrowser:w["default"]},apollo:{item:{query:J,variables:function(){return{ident:this.uid}},pollInterval:4e3}},data:function(){return{clonedAgentId:null,cloneError:null,submitting:!1,refreshingSnapshots:!1,taskDetailsList:[],fields:B,pubfields:D,snapshot_description:"",snapshot_version:"0-dev",snapshots:[],plot_actual_count:0,plot_total_count:0,plotBinSize:0,plotStepMax:0,selected:[],traceback:null,publish:!1,creatingSnapshot:!1,publishError:null,componentFields:[{key:"name",label:"Name"},{key:"specId",label:"Spec Id"},{key:"spec.category",label:"Type"}],graphList:[],error:null,item:{},timer:null,timelength:u["f"],formatNum:u["a"]}},props:{uid:String},computed:{lifeSteps:function(){if(null==this.item.sessions)return 0;var t,e=0,n=Object(s["a"])(this.item.sessions.edges);try{for(n.s();!(t=n.n()).done;){var a=t.value;1!=a.node.archived&&null==a.node.parentSessionId&&(e+=a.node.summary.step_count)}}catch(i){n.e(i)}finally{n.f()}return e},config:function(){return JSON.parse(this.item.config)},meta:function(){return JSON.parse(this.item.meta)},plotStepMaxOptions:function(){if(0==this.plot_total_count)return[];var t=this.plot_total_count.toString().length-1,e=[];e.push({text:"All (".concat(this.plot_total_count,")"),value:"0"});for(var n=t;n>2;n--){var a=Math.pow(10,n);e.push({text:"last ".concat(a),value:"".concat(a)})}return e},plotBinSizeOptions:function(){if(0==this.plot_total_count)return[];var t=this.plot_total_count.toString().length-2,e=[];if(e.push({text:"Auto",value:"0"}),t>1)for(var n=t;n>0;n--){var a=Math.pow(10,n);e.push({text:"".concat(a),value:"".concat(a)})}return e.push({text:"5",value:"5"}),e.push({text:"1",value:"1"}),e},rowData:function(){var t=[];if(null==this.item.sessions)return t;var e,n=Object(s["a"])(this.item.sessions.edges);try{for(n.s();!(e=n.n()).done;){var a=e.value;1!=a.node.archived&&t.push(a.node)}}catch(i){n.e(i)}finally{n.f()}return t}},methods:{updateArchive:function(t){var e=this;this.$apollo.mutate({mutation:p()(U()),variables:{id:this.item.id,archive:t}}).then((function(t){e.refetch()})).catch((function(t){console.error(t)}))},timepretty:u["g"],refetch:function(){this.$apollo.queries.item.refetch()},runCompare:function(){this.$router.push({path:"/session/compare?uids="+this.selected.join(",")})},configUpdated:function(){console.log("ConfigUPdate"),this.refetch(),this.$bvModal.hide("edit-modal")},stopSession:function(t){var e=this;l.a.get("".concat(c["a"].API_URL,"/api/admin/task/stop/").concat(t)).then((function(t){e.message=t.data["message"],console.log("TASK ABORT REQUEST ".concat(e.message)),e.refreshData()})).catch((function(t){e.error=t,e.message=e.error}))},agentControl:function(t){var e=this;l.a.get("".concat(c["a"].API_URL,"/api/agent_control/").concat(t,"?uid=").concat(this.uid)).then((function(t){e.message=t.data["message"]})).catch((function(t){e.error=t,e.message=e.error,e.$bvModal.show("errorbox")}))},loadSnapshotList:function(){var t=this;this.item&&this.item.ident&&l.a.get("".concat(c["a"].API_URL,"/api/snapshots/agent/list/").concat(this.item.ident)).then((function(e){t.snapshots=e.data["items"]})).catch((function(e){t.publishError=e,console.log(e)}))},loadGraphs:function(){var t=this;l.a.get("".concat(c["a"].API_URL,"/api/agent_plots_json/").concat(this.uid,"?max_steps=").concat(this.plotStepMax,"&bin_size=").concat(this.plotBinSize)).then((function(e){var n=e.data.plot_data;if(null==n)return t.error=e.data.error,t.traceback=e.data.traceback,console.log(t.error),void console.log(t.traceback);t.plot_actual_count=e.data.actual_count,t.plot_total_count=e.data.total_count,t.graphList=[],Object.keys(n).forEach((function(e){var a={},i=n[e];if(i.data){if(a.data=[i.data],!i.layout)return;a.layout=i.layout,a.layout.autosize=!0,a.layout.margin={t:25,l:25,r:25,b:25},a.layout.font={color:"rgba(200,200,200,1)"},a.layout.plot_bgcolor="rgba(0,0,0,0.1)",a.layout.paper_bgcolor="rgba(0,0,0,0.1)",a.layout.yaxis={gridcolor:"rgba(200,200,200,0.25)",gridwidth:1},a.layout.xaxis={gridcolor:"rgba(200,200,200,0.25)",gridwidth:1},a.layout.height=250,t.graphList.push(a)}}))})).catch((function(e){t.error=e,t.$bvModal.show("errorbox")}))},createSnapshot:function(){var t=this,e={snapshot_version:this.snapshot_version,snapshot_description:this.snapshot_description,agent_id:this.uid,publish:this.publish};console.log(JSON.stringify(e,null,2)),this.publishError=null,this.traceback=null,this.submitting=!0,l.a.post("".concat(c["a"].API_URL,"/api/snapshot/create"),e).then((function(e){console.log("Snapshot Created: Success="+e.data["success"]),t.submitting=!1,t.loadSnapshotList(),0==e.data["success"]&&(t.publishError=e.data.item.error,console.log(t.publishError))})).catch((function(e){console.log("Received Error: "+e.message),t.publishError=e,t.submitting=!1,t.loadSnapshotList()}))},createClone:function(){var t=this;this.cloneError=null,this.submitting=!0,l.a.get("".concat(c["a"].API_URL,"/api/agent/clone/").concat(this.uid)).then((function(e){console.log(JSON.stringify(e.data,null,2)),"uid"in e.data?t.clonedAgentId=e.data.uid:t.cloneError=e.message,t.submitting=!1})).catch((function(t){this.cloneError=t,this.submitting=!1}))}},created:function(){console.log(this.uid),this.loadSnapshotList(),this.timer=setInterval(this.loadGraphs,2e3),this.loadGraphs()},beforeDestroy:function(){clearInterval(this.timer)}},G=R,q=(n("3fc0"),Object(S["a"])(G,a,i,!1,null,null,null));e["default"]=q.exports},9270:function(t,e,n){},a630:function(t,e,n){var a=n("23e7"),i=n("4df4"),s=n("1c7e"),o=!s((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:i})},ac0a:function(t,e,n){},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),n("a630"),n("fb6a"),n("b0c0"),n("25f0");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function s(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(l)throw o}}}}},cb77:function(t,e,n){},e838:function(t,e,n){"use strict";var a=n("ac0a"),i=n.n(a);i.a},e987:function(t,e,n){"use strict";var a=n("9270"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-439cdb06.5566d156.js.map