(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3570bf95"],{"057f":function(t,e,n){var a=n("fc6a"),s=n("241c").f,r={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return s(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==r.call(t)?o(t):s(a(t))}},"3ca3":function(t,e,n){"use strict";var a=n("6547").charAt,s=n("69f3"),r=n("7dd0"),i="String Iterator",o=s.set,c=s.getterFor(i);r(String,"String",(function(t){o(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),n=e.string,s=e.index;return s>=n.length?{value:void 0,done:!0}:(t=a(n,s),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,n){"use strict";var a=n("0366"),s=n("7b0b"),r=n("9bdd"),i=n("e95a"),o=n("50c4"),c=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,f,d,b,v=s(t),m="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,y=void 0!==g,k=l(v),h=0;if(y&&(g=a(g,p>2?arguments[2]:void 0,2)),void 0==k||m==Array&&i(k))for(e=o(v.length),n=new m(e);e>h;h++)b=y?g(v[h],h):v[h],c(n,h,b);else for(f=k.call(v),d=f.next,n=new m;!(u=d.call(f)).done;h++)b=y?r(f,g,[u.value,h],!0):u.value,c(n,h,b);return n.length=h,n}},"746f":function(t,e,n){var a=n("428f"),s=n("5135"),r=n("e538"),i=n("9bf2").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});s(e,t)||i(e,t,{value:r.f(t)})}},a4d3:function(t,e,n){"use strict";var a=n("23e7"),s=n("da84"),r=n("d066"),i=n("c430"),o=n("83ab"),c=n("4930"),l=n("fdbf"),u=n("d039"),f=n("5135"),d=n("e8b5"),b=n("861d"),v=n("825a"),m=n("7b0b"),p=n("fc6a"),g=n("c04e"),y=n("5c6c"),k=n("7c73"),h=n("df75"),S=n("241c"),_=n("057f"),w=n("7418"),C=n("06cf"),I=n("9bf2"),O=n("d1e7"),T=n("9112"),N=n("6eeb"),j=n("5692"),A=n("f772"),P=n("d012"),D=n("90e3"),x=n("b622"),E=n("e538"),R=n("746f"),z=n("d44e"),U=n("69f3"),J=n("b727").forEach,$=A("hidden"),L="Symbol",V="prototype",M=x("toPrimitive"),q=U.set,F=U.getterFor(L),G=Object[V],B=s.Symbol,H=r("JSON","stringify"),Q=C.f,W=I.f,K=_.f,X=O.f,Y=j("symbols"),Z=j("op-symbols"),tt=j("string-to-symbol-registry"),et=j("symbol-to-string-registry"),nt=j("wks"),at=s.QObject,st=!at||!at[V]||!at[V].findChild,rt=o&&u((function(){return 7!=k(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,n){var a=Q(G,e);a&&delete G[e],W(t,e,n),a&&t!==G&&W(G,e,a)}:W,it=function(t,e){var n=Y[t]=k(B[V]);return q(n,{type:L,tag:t,description:e}),o||(n.description=e),n},ot=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof B},ct=function(t,e,n){t===G&&ct(Z,e,n),v(t);var a=g(e,!0);return v(n),f(Y,a)?(n.enumerable?(f(t,$)&&t[$][a]&&(t[$][a]=!1),n=k(n,{enumerable:y(0,!1)})):(f(t,$)||W(t,$,y(1,{})),t[$][a]=!0),rt(t,a,n)):W(t,a,n)},lt=function(t,e){v(t);var n=p(e),a=h(n).concat(vt(n));return J(a,(function(e){o&&!ft.call(n,e)||ct(t,e,n[e])})),t},ut=function(t,e){return void 0===e?k(t):lt(k(t),e)},ft=function(t){var e=g(t,!0),n=X.call(this,e);return!(this===G&&f(Y,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(Y,e)||f(this,$)&&this[$][e])||n)},dt=function(t,e){var n=p(t),a=g(e,!0);if(n!==G||!f(Y,a)||f(Z,a)){var s=Q(n,a);return!s||!f(Y,a)||f(n,$)&&n[$][a]||(s.enumerable=!0),s}},bt=function(t){var e=K(p(t)),n=[];return J(e,(function(t){f(Y,t)||f(P,t)||n.push(t)})),n},vt=function(t){var e=t===G,n=K(e?Z:p(t)),a=[];return J(n,(function(t){!f(Y,t)||e&&!f(G,t)||a.push(Y[t])})),a};if(c||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),n=function(t){this===G&&n.call(Z,t),f(this,$)&&f(this[$],e)&&(this[$][e]=!1),rt(this,e,y(1,t))};return o&&st&&rt(G,e,{configurable:!0,set:n}),it(e,t)},N(B[V],"toString",(function(){return F(this).tag})),N(B,"withoutSetter",(function(t){return it(D(t),t)})),O.f=ft,I.f=ct,C.f=dt,S.f=_.f=bt,w.f=vt,E.f=function(t){return it(x(t),t)},o&&(W(B[V],"description",{configurable:!0,get:function(){return F(this).description}}),i||N(G,"propertyIsEnumerable",ft,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:B}),J(h(nt),(function(t){R(t)})),a({target:L,stat:!0,forced:!c},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=B(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){st=!0},useSimple:function(){st=!1}}),a({target:"Object",stat:!0,forced:!c,sham:!o},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:dt}),a({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:bt,getOwnPropertySymbols:vt}),a({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(m(t))}}),H){var mt=!c||u((function(){var t=B();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));a({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,n){var a,s=[t],r=1;while(arguments.length>r)s.push(arguments[r++]);if(a=e,(b(e)||void 0!==t)&&!ot(t))return d(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!ot(e))return e}),s[1]=e,H.apply(null,s)}})}B[V][M]||T(B[V],M,B[V].valueOf),z(B,L),P[$]=!0},a630:function(t,e,n){var a=n("23e7"),s=n("4df4"),r=n("1c7e"),i=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:s})},b3d1:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"page-content"},[n("h1",[t._v("Task Details")]),n("b-modal",{attrs:{id:"modal-config",title:"View config",size:"xl"}},[n("div",[n("pre",[t._v(t._s(JSON.stringify(t.taskConfig,null,2)))])])]),n("b-modal",{attrs:{id:"modal-summary",title:"View Summary",size:"xl"}},[t.task&&t.task.summary?n("pre",[t._v(t._s(JSON.parse(t.task.summary))+"\n            ")]):t._e()]),n("b-modal",{attrs:{id:"modal-modify-source",title:"TODO"}},[t._v(" TODO ")]),n("b-button-toolbar",{staticClass:"mr-1",attrs:{size:"sm"}},[n("b-button-group",{staticClass:"mr-1",attrs:{size:"sm"}},[n("b-button",{attrs:{size:"sm",to:"/task/new/agenttask/"+t.task.ident}},[n("i",{staticClass:"fa fa-copy"}),t._v(" Copy")]),n("b-button",{attrs:{size:"sm",to:"/data_browser/?path=task/"+t.uid}},[n("i",{staticClass:"fa fa-folder"}),t._v(" Files")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-config",modifiers:{"modal-config":!0}}],attrs:{size:"sm"}},[t._v("View Config")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-summary",modifiers:{"modal-summary":!0}}],attrs:{size:"sm"}},[t._v("View Summary")]),t.task.status&&"RUNNING"==t.task.status?n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.taskControl("STOP")}}},[n("i",{staticClass:"fa fa-stop"}),t._v(" Abort")]):t._e(),!t.task.status||"ABORTED"!=t.task.status&&"TERMINATED"!=t.task.status?t._e():n("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){return t.taskControl("RUN")}}},[n("i",{staticClass:"fa fa-play"}),t._v(" Run")])],1)],1),n("div",{staticClass:"mt-4"}),t.task.status&&t.task.statusMsg?n("b-alert",{attrs:{show:"",variant:"warning"}},[n("pre",[t._v(t._s(t.task.statusMsg))])]):t._e(),n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"2"}},[n("div",{staticClass:"pt-2"},[n("div",{staticClass:"data_label"},[t._v("Task ID")]),n("span",[t._v(t._s(t.uid))])]),n("div",{staticClass:"pt-2"},[n("div",{staticClass:"data_label"},[t._v("Spec ID")]),n("span",[t._v(t._s(t.task.specId))])]),n("div",{staticClass:"pt-2"},[n("div",{staticClass:"data_label"},[t._v("Creation Time")]),n("span",[t._v(t._s(t.task.created))])]),n("div",{staticClass:"pt-2"},[n("div",{staticClass:"data_label"},[t._v("Status")]),t.task.status?n("div",[t._v(" "+t._s(t.task.status)+" ")]):t._e()]),n("div",{staticClass:"pt-2"},[n("div",{staticClass:"data_label"},[t._v("Parent Task")]),t.task.parentTask?n("div",[n("router-link",{attrs:{to:"/task/view/"+t.task.parentTaskId}},[t._v(t._s(t.task.parentTaskId))]),t._v(" ("+t._s(t.task.parentTask.specId)+") ")],1):n("div",[t._v("No Parent")])]),n("hr"),n("div",{staticClass:"pt-2"},[n("h3",[t._v("Primary Session")]),t.task.primarySessionId?n("div",[n("router-link",{staticStyle:{"font-size":"1.4em"},attrs:{to:"/session/view/"+t.task.primarySessionId}},[t._v(t._s(t.task.primarySessionId))])],1):n("div",[t._v("No Primary Session")])])]),n("b-col",[n("b-card",{attrs:{title:"Task Log"}},[n("LogViewer",{attrs:{nocard:!0,logStreamUrl:t.appConfig.API_URL+"/api/stream/entity_logs/task/"+t.uid}})],1)],1)],1)],1),n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[t.sessionData.length>0?n("div",[n("div",{staticClass:"mb-4"}),n("div",{staticClass:"mb-4"}),n("div",{staticClass:"mb-4"}),n("b-card",{staticClass:"mt-3",attrs:{title:"Sessions"}},[n("b-card-text",[n("b-table",{attrs:{striped:"",hover:"","table-busy":"",items:t.sessionData,fields:t.fields,dark:!1,small:!1},scopedSlots:t._u([{key:"cell(link)",fn:function(e){return[n("router-link",{attrs:{to:"/session/view/"+e.item.ident}},[t._v(t._s(e.item.ident))])]}}],null,!1,3670971571)})],1)],1)],1):t._e()])],1),n("div",{staticClass:"mt-4"}),n("b-row",[n("b-col",[t.subtaskData.length>0?n("b-card",{attrs:{title:"Sub Tasks"}},[n("b-table",{attrs:{hover:"","table-busy":"",items:t.subtaskData,fields:t.subtaskfields,dark:!1,small:!1},scopedSlots:t._u([{key:"cell(link)",fn:function(e){return[n("router-link",{attrs:{to:"/task/view/"+e.item.ident}},[t._v(t._s(e.item.ident))])]}}],null,!1,2816067904)})],1):n("div",[t._v(" No SubTasks ")])],1)],1)],1),n("div",{staticClass:"mt-4"})],1),n("HelpInfo",{attrs:{contentId:"tasks"}})],1)},s=[],r=(n("99af"),n("b85c")),i=n("8785"),o=n("bc3a"),c=n.n(o),l=n("4023"),u=n("bbd0"),f=n("9530"),d=n.n(f),b=n("1577");function v(){var t=Object(i["a"])(["\n  query GetTask($ident: String!) {\n    task(ident: $ident) {\n      id\n      ident\n      status\n      statusMsg\n      specId\n\n      config\n      created\n      summary\n\n      primarySessionId\n      parentTaskId\n      parentTask {\n        specId\n      }\n      sessions {\n        pageInfo {\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n              id\n            ident\n            envSpecId\n            agentId\n            created\n            status\n            summary\n          }\n        }\n      }\n      childTasks {\n        pageInfo {\n          startCursor\n          endCursor\n        }\n        edges {\n          node {\n              id\n            ident\n            created\n            specId\n            status\n            summary\n          }\n        }\n      }\n    }\n  }\n"]);return v=function(){return t},t}var m=[{key:"link",label:"Session",sortable:!0},{key:"envSpecId",label:"Environment"},{key:"created",label:"Created",sortable:!0},{key:"status",label:"State"}],p=[{key:"link",label:"Task",sortable:!0},{key:"specId",label:"Spec Id",sortable:!0},{key:"created",label:"Created",sortable:!0},{key:"status",label:"State"}],g=d()(v()),y={name:"Task",components:{LogViewer:b["a"]},apollo:{task:{query:g,variables:function(){return{ident:this.uid}},pollInterval:2e3}},data:function(){return{appConfig:l["a"],fields:m,subtaskfields:p,task:{},taskLogData:[],error:"",intervalTimer:null}},props:{uid:String},computed:{taskConfig:function(){return this.task.config?JSON.parse(this.task.config):""},taskSummary:function(){return this.task&&this.task.summary?JSON.stringify(this.task.summary):"{}"},sessionData:function(){var t=[];if(null==this.task.sessions||0==this.task.sessions.edges.length)return[];var e,n=Object(r["a"])(this.task.sessions.edges);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.node)}}catch(s){n.e(s)}finally{n.f()}return t},subtaskData:function(){var t=[];if(null==this.task.childTasks||0==this.task.childTasks.edges.length)return[];var e,n=Object(r["a"])(this.task.childTasks.edges);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.node)}}catch(s){n.e(s)}finally{n.f()}return t}},methods:{timepretty:u["g"],taskControl:function(t){var e=this;"STOP"==t?c.a.get("".concat(l["a"].API_URL,"/api/admin/task/stop/").concat(this.uid)).then((function(t){e.message=t.data["message"]})).catch((function(t){e.error=t,e.message=e.error})):"RUN"==t&&(console.log("RUN"),c.a.get("".concat(l["a"].API_URL,"/api/admin/task/run/").concat(this.uid)).then((function(t){e.message=t.data["message"],console.log(e.message)})).catch((function(t){e.error=t,e.message=e.error,console.log(e.error)})))}},created:function(){var t=this;console.log(this.uid),this.intervalTimer=setInterval((function(){t.$apollo.queries.task.loading||(!t.task.status||"RUNNING"!=t.task.status&&"CREATED"!=t.task.status?clearInterval(t.intervalTimer):t.$apollo.queries.task.refetch())}),1e3)},beforeDestroy:function(){this.intervalTimer&&clearInterval(this.intervalTimer)}},k=y,h=n("2877"),S=Object(h["a"])(k,a,s,!1,null,null,null);e["default"]=S.exports},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),n("a630"),n("fb6a"),n("b0c0"),n("25f0");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function r(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(c)throw i}}}}},d28b:function(t,e,n){var a=n("746f");a("iterator")},e01a:function(t,e,n){"use strict";var a=n("23e7"),s=n("83ab"),r=n("da84"),i=n("5135"),o=n("861d"),c=n("9bf2").f,l=n("e893"),u=r.Symbol;if(s&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};l(d,u);var b=d.prototype=u.prototype;b.constructor=d;var v=b.toString,m="Symbol(test)"==String(u("test")),p=/^Symbol\((.*)\)[^)]+$/;c(b,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=v.call(t);if(i(f,t))return"";var n=m?e.slice(7,-1):e.replace(p,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:d})}},e538:function(t,e,n){var a=n("b622");e.f=a}}]);
//# sourceMappingURL=chunk-3570bf95.0ed39b56.js.map