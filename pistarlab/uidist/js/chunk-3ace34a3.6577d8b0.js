(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ace34a3"],{"07ac":function(e,t,n){var a=n("23e7"),s=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return s(e)}})},3812:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Agent Specs")]),n("b-form-input",{staticStyle:{width:"250px"},attrs:{placeholder:"Search"},model:{value:e.searchtext,callback:function(t){e.searchtext=t},expression:"searchtext"}}),n("div",{staticClass:"mb-4"}),n("b-container",{attrs:{fluid:""}},[e.$apollo.queries.agentSpecs.loading?n("div",[e._v("Loading..")]):e.agentSpecs&&e.agentSpecs.length>0?n("div",e._l(e.specs,(function(t){return n("div",{key:t.id},[t.disabled?e._e():n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"2"}},[n("b-card-img",{staticStyle:{"max-width":"100px"},attrs:{src:"/img/agent_spec_icons/agent_"+e.getImageId(t.ident)+".png",alt:"Image"}})],1),n("b-col",{},[n("router-link",{attrs:{to:"/agent_spec/"+t.ident}},[e._v(e._s(t.displayedName))]),n("div",{},[t.disabled?n("b-alert",{attrs:{size:"sm",show:"",variant:"warning"}},[e._v("disabled")]):e._e()],1),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Spec Id: ")]),n("span",[e._v(" "+e._s(t.ident)+" ")])]),n("div",["WORKSPACE"==t.extensionId?n("span",[n("b-badge",{attrs:{variant:"warning"}},[n("i",{staticClass:"fa fa-code"}),e._v(" in your workspace")])],1):n("span",{staticClass:"data_label mt-1"},[e._v(" Extension/Version ")]),e._v(" "+e._s(t.extensionId)+"/"+e._s(t.version)+" ")])],1),n("b-col",{attrs:{cols:"4"}},[n("b-button",{staticClass:"float-right",attrs:{size:"sm",disabled:t.disabled,variant:"info"},on:{click:function(n){e.select(t.ident)}}},[e._v(" Select ")])],1)],1),n("hr")],1)})),0):n("div",[n("b-row",[n("b-col",[e._v(e._s(e.message))])],1)],1)])],1)},s=[],i=(n("4de4"),n("caad"),n("2532"),n("8785")),r=(n("bc3a"),n("4023"),n("9530")),o=n.n(r);function c(){var e=Object(i["a"])(["\n      query {\n        agentSpecs: agentSpecs {\n          id\n          ident\n          displayedName\n          disabled\n          extensionId\n          version\n        }\n      }\n    "]);return c=function(){return e},e}var l={components:{},apollo:{agentSpecs:o()(c())},data:function(){return{selectedSpecId:null,agentSpecs:[],searchtext:"",error:"",message:"No Agent Specs Available"}},computed:{specs:function(){var e=this;return null==this.agentSpecs||0==this.agentSpecs.length?[]:""!=this.searchtext?this.agentSpecs.filter((function(t){for(var n=[t.displayedName,t.ident,t.extensionId],a=!1,s=0,i=n;s<i.length;s++){var r=i[s];if(null!=r&&r.toLowerCase().includes(e.searchtext.toLowerCase())){a=!0;break}}return a})):this.agentSpecs}},methods:{select:function(e){this.$emit("specSelected",e)}},created:function(){}},d=l,u=n("2877"),p=Object(u["a"])(d,a,s,!1,null,null,null);t["a"]=p.exports},"6f53":function(e,t,n){var a=n("83ab"),s=n("df75"),i=n("fc6a"),r=n("d1e7").f,o=function(e){return function(t){var n,o=i(t),c=s(o),l=c.length,d=0,u=[];while(l>d)n=c[d++],a&&!r.call(o,n)||u.push(e?[n,o[n]]:o[n]);return u}};e.exports={entries:o(!0),values:o(!1)}},7369:function(e,t,n){"use strict";var a=n("d643"),s=n.n(a);s.a},8467:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"page-content"},[n("h1",[e._v("Assign New Task")]),n("b-modal",{attrs:{id:"modal-launch-task",title:"Launching Task",size:"lg","hide-footer":!0,"hide-header-close":!0,"no-close-on-backdrop":!0,"no-close-on-esc":!0}},[n("TaskLoad",{attrs:{uid:e.newTaskId}})],1),n("b-modal",{attrs:{id:"modal-select-envspec",title:"Select Environment",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.cancel;return[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return a()}}},[e._v("Cancel")])]}}])},[n("EnvSelector",{on:{click:function(t){return e.selectEnvSpec(t)}}})],1),n("b-modal",{attrs:{id:"modal-select-agent",title:"Select Agent",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.cancel;return[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return a()}}},[e._v("Cancel")])]}}])},[n("AgentSelector",{on:{click:function(t){return e.loadAgent(t)}}})],1),n("b-modal",{attrs:{id:"modal-configure-envspec",title:"Environment Kwargs",size:"lg"}},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("div",[e._v(" These are aguments passed directly to the environment. Changing these may impact behavior and make results incomparable. "),n("br"),n("br"),e._v(" JSON format required. "),n("b-textarea",{staticClass:"mt-4",attrs:{rows:"10","no-auto-shrink":"",size:"lg",height:"100%"},model:{value:e.envSpecKwargOverrides,callback:function(t){e.envSpecKwargOverrides=t},expression:"envSpecKwargOverrides"}})],1)])],1)],1)],1),n("b-modal",{attrs:{id:"modal-full-config",title:"Config Output",size:"lg"}},[n("div",[n("pre",{staticClass:"mt-3"},[e._v(e._s(e.fullConfig))])])]),n("b-modal",{attrs:{id:"modal-configure-agent",title:"Configure Agent",size:"lg"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.updateAgentConfig()}}},[e._v("Ok")]),n("b-button",{on:{click:function(t){return e.removeAgent()}}},[n("i",{staticClass:"fa fa-trash"}),e._v(" Remove")])]}}])},[e.selectedAgent?n("div",{staticClass:"mb-4"},[n("span",{staticClass:"h4 mr-4"},[e._v(" Agent: "),n("b-link",{attrs:{target:"_blank",to:"/agent/view/"+e.selectedAgent.ident}},[e._v(" "+e._s(e.selectedAgent.name)+" ("+e._s(e.selectedAgent.ident)+")")])],1),n("span",{staticClass:"h4  mr-4"},[e._v(" Spec: "),n("b-link",{attrs:{target:"_blank",to:"/agent_spec/"+e.selectedAgent.specId}},[e._v(e._s(e.selectedAgent.spec.displayedName))])],1)]):e._e(),n("b-tabs",{attrs:{"content-class":"mt-4",justified:""}},[n("b-tab",{attrs:{title:"Session Configuration"}},[n("div",{staticClass:"d-flex flex-wrap"},e._l(e.agentSessionConfigFields,(function(t){return n("b-form-group",{key:t.key,staticClass:"ml-2",staticStyle:{width:"320px"},attrs:{label:t.label,description:t.description}},["boolean"==t.type?n("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false"},model:{value:e.agentSessionConfig[t.key],callback:function(n){e.$set(e.agentSessionConfig,t.key,n)},expression:"agentSessionConfig[item.key]"}}):n("b-form-input",{staticClass:"mt-1",attrs:{type:t.type,size:"sm"},model:{value:e.agentSessionConfig[t.key],callback:function(n){e.$set(e.agentSessionConfig,t.key,n)},expression:"agentSessionConfig[item.key]"}})],1)})),1)]),n("b-tab",{attrs:{title:"Agent Configuration"}},[n("ParamEditor",{attrs:{interfaceFilter:"run",buttonText:"Save",params:e.selectedAgentParams,values:e.agentRunConfig},on:{update:function(t){e.agentRunConfig=t}}})],1),n("b-tab",{attrs:{title:"Environment Wrappers (BROKEN)"}},[n("strong",[e._v("WARNING wrappers currently not working. This wrapper need to be updated to support multi agent env interfaces")]),n("p",[e._v("Please select wrappers in the order they will be added the the environment")]),n("b-form-checkbox-group",{attrs:{options:e.wrapperOptions,name:"wrappers",stacked:""},model:{value:e.agentWrappers,callback:function(t){e.agentWrappers=t},expression:"agentWrappers"}}),e._l(e.agentWrappers,(function(t,a){return n("div",{key:t},[n("div",{},[e._v(" "+e._s(a)+" - "+e._s(e.wrappers[t]["entry_point"])+" ")])])}))],2)],1)],1),n("b-modal",{attrs:{id:"assign-player-modal",title:"Assign Player"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.cancel;return[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return a()}}},[e._v("Cancel")])]}}])},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[null!=e.currentPlayerId?n("div",[e._v(" "+e._s(e.envPlayers[e.currentPlayerId].id)+" "),e._l(e.agents,(function(t,a){return n("div",{key:a,staticClass:"m-2"},[n("b-button",{on:{click:function(t){return e.assignPlayerToAgent(e.currentPlayerId,a)}}},[e._v(e._s(t.ident))])],1)}))],2):e._e()])],1)],1)],1),n("b-modal",{attrs:{id:"modal-config",title:"Run Configuration",size:"lg"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.ok;return[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return a()}}},[e._v("Ok")])]}}])},[n("div",{staticClass:"d-flex flex-wrap mb-4"},e._l(e.rlSessionConfigFields,(function(t){return n("b-form-group",{key:t.key,staticClass:"ml-2",staticStyle:{width:"300px"},attrs:{label:t.label,description:t.description}},["boolean"==t.type?n("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false"},model:{value:e.sessionConfig[t.key],callback:function(n){e.$set(e.sessionConfig,t.key,n)},expression:"sessionConfig[item.key]"}}):n("b-form-input",{staticClass:"mt-1",attrs:{type:t.type,size:"sm"},model:{value:e.sessionConfig[t.key],callback:function(n){e.$set(e.sessionConfig,t.key,n)},expression:"sessionConfig[item.key]"}})],1)})),1)]),n("div",[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"d-flex justify-content-center"},[n("h3",[n("i",{staticClass:"fas fa-gamepad"}),e._v(" Environment")]),n("div",{staticClass:"mt-4"})])],1),n("b-row",[n("b-col",[e.envSpec?n("div",[n("b-card",{staticClass:"card-shadow card-flyer"},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"text-center  align-self-center",attrs:{cols:"3"}},[n("b-card-img",{staticStyle:{"max-height":"200px",width:"auto"},attrs:{src:e.appConfig.API_URL+"/api/env_preview_image/"+e.envSpec.ident,alt:""}})],1),n("b-col",[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"4"}},[n("div",{staticClass:"mt-auto"},[n("div",{staticClass:"mb-4"},[n("router-link",{attrs:{to:"/env_spec/view/"+e.envSpec.ident}},[n("h3",[e._v(e._s(e.envSpec.displayedName))])])],1),n("div",{staticClass:"data_label"},[e._v("Environment: "+e._s(e.envSpec.environment.ident))]),n("div",{staticClass:"data_label"},[e._v("Type: "+e._s(e.envSpec.envType))]),e.envMeta.num_players?n("div",{staticClass:"data_label"},[e._v("Num Agents: "+e._s(e.envMeta.num_players)+" ")]):e._e(),n("div",{staticClass:"data_label"},[n("b-modal",{attrs:{id:"show-obvdetails",size:"lg",scrollable:""}},[n("b-row",{staticClass:"h4"},[n("b-col",{attrs:{cols:"3"}},[e._v("Agent Slot Name")]),n("b-col",[e._v(" Observation Space ")])],1),n("hr"),e.envMeta&&e.envMeta.observation_spaces?n("span",e._l(e.envMeta.observation_spaces,(function(t,a){return n("b-row",{key:a},[n("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(a))]),n("b-col",[n("SpaceInfo",{attrs:{space:t}})],1)],1)})),1):n("span",[e._v("No observation spaces defined")])],1),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.show-obvdetails",modifiers:{"show-obvdetails":!0}}],attrs:{variant:"secondary",size:"sm"}},[e._v("Observation Space Details")])],1),n("div",{staticClass:"data_label"},[n("b-modal",{attrs:{id:"show-actdetails",size:"lg",scrollable:""}},[n("b-row",{staticClass:"h4"},[n("b-col",{attrs:{cols:"3"}},[e._v("Agent Slot Name")]),n("b-col",[e._v(" Action Space ")])],1),n("hr"),e.envMeta&&e.envMeta.action_spaces?n("span",e._l(e.envMeta.action_spaces,(function(t,a){return n("b-row",{key:a},[n("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(a))]),n("b-col",[n("SpaceInfo",{attrs:{space:t}})],1)],1)})),1):n("span",[e._v("No action spaces defined")])],1),n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal.show-actdetails",modifiers:{"show-actdetails":!0}}],attrs:{variant:"secondary",size:"sm"}},[e._v("Action Space Details")])],1)])]),n("b-col",[n("b-container",{staticClass:"border-left",attrs:{fluid:""}},[n("div",[n("div",{staticClass:"overflow-auto",staticStyle:{"max-height":"250px"}},[n("h3",[e._v("Players")]),n("hr"),n("b-row",{staticClass:"m-0 mb-2",staticStyle:{"font-weight":"600"}},[n("b-col",{attrs:{cols:"2"}},[e._v("Slot Id ")]),n("b-col",[e._v(" Observation Space ")]),n("b-col",[e._v(" Action Space ")]),n("b-col",{attrs:{cols:"2"}},[e._v(" Assignment ")]),n("b-col",{attrs:{cols:"1"}})],1),e._l(e.envPlayers,(function(t,a){return n("b-row",{key:a,staticClass:"m-0"},[n("b-col",{attrs:{cols:"2"}},[e._v(e._s(t.id))]),n("b-col",[n("SpaceInfo",{attrs:{space:e.envMeta.observation_spaces[t.id]}})],1),n("b-col",[n("SpaceInfo",{attrs:{space:e.envMeta.action_spaces[t.id]}})],1),n("b-col",{attrs:{cols:"2"}},[null!=t.agent?n("span",[e._v(" "+e._s(e.agents[t.agent].ident)+" ")]):n("span",[e._v(" Unassigned ")])]),n("b-col",{attrs:{cols:"1"}},[n("b-link",{attrs:{size:"sm"},on:{click:function(t){return e.assignPlayerModal(a)}}},[n("i",{staticClass:"fa fa-edit"})])],1)],1)}))],2),null==e.envPlayers||0==e.envPlayers.length?n("div",[n("b-row",[n("b-col",[e._v(" No Players Found ")])],1)],1):e._e()]),e.envSpec&&"RL_SINGLEPLAYER_ENV"==e.envSpec.envType?n("div",{staticClass:"mt-2"},[n("hr"),n("h4",[e._v("Environment Instances")]),n("b-form-input",{staticClass:"ml-2 pl-5",staticStyle:{width:"100px"},attrs:{type:"number"},model:{value:e.batchSize,callback:function(t){e.batchSize=t},expression:"batchSize"}})],1):e._e()])],1)],1)],1)],1)],1)],1)],1),n("div",{staticClass:"d-flex mt-4 justify-content-center"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-select-envspec",modifiers:{"modal-select-envspec":!0}}],attrs:{size:"sm",variant:"info"}},[e._v("Change Environment")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-configure-envspec",modifiers:{"modal-configure-envspec":!0}}],staticClass:"ml-2",attrs:{size:"sm",variant:"secondary"}},[e._v("Edit Arguments")])],1)],1):n("div",{staticClass:"d-flex justify-content-center"},[n("b-card",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-select-envspec",modifiers:{"modal-select-envspec":!0}}],staticClass:"h-100 card-shadow card-flyer",staticStyle:{width:"100px","background-color":"#ccc",color:"#000"},attrs:{"body-text-variant":""}},[n("b-card-body",{staticClass:"text-center"},[n("div",[n("i",{staticClass:"fa fa-plus"})])])],1)],1)])],1),n("div",{staticClass:"mt-4"}),n("hr"),n("div",{staticClass:"mt-4"}),n("b-row",[n("b-col",{staticClass:"d-flex justify-content-center"},[n("h3",[n("i",{staticClass:"fas fa-robot"}),e._v(" Agents")])])],1),n("div",{staticClass:"mt-4"}),n("b-row",[n("b-col",{staticClass:"d-flex flex-wrap justify-content-center mb-4"},[e._l(e.agents,(function(t,a){return n("span",{key:a,staticClass:"mr-3"},[n("b-card",{staticClass:"h-100 card-shadow card-flyer ",staticStyle:{width:"320px"},attrs:{"no-body":"","header-bg-variant":"info","header-text-variant":"white"},scopedSlots:e._u([{key:"header",fn:function(){return[n("span",{staticClass:"custom-card-header"},[n("b-link",{staticStyle:{color:"white"},on:{click:function(t){return e.agentConfigModal(a)}}},[n("div",{staticClass:"mb-2"},[e._v(" "+e._s(t.ident)+" "),t.name?n("span",[e._v("("+e._s(t.name)+")")]):e._e()])])],1)]},proxy:!0}],null,!0)},[n("b-container",{staticClass:"mt-2"},[n("b-row",[n("b-col",{staticClass:"text-center"},[n("b-card-img",{staticClass:"rounded-0 mt-2",staticStyle:{width:"250px"},attrs:{src:"/img/agent_spec_icons/agent_"+e.getImageId(t.specId)+".png",alt:"Image"}})],1)],1),n("div",{staticClass:"mt-3"}),n("b-row",[n("b-col",[n("div",[n("span",{staticClass:"data_label"},[e._v("Spec Id: ")]),e._v(" "+e._s(t.specId)+" ")]),n("div",{staticClass:"data_label"}),n("div",{staticClass:"data_label"},[e._v(" Players Assigned: ")]),e._l(e.getPlayersDataForAgent(a),(function(a,s){return n("div",{key:s,staticClass:"ml-2"},[n("span",[e._v(" "+e._s(a.id)+" : ")]),t.run_config.interfaces?n("span",[t.run_config.interfaces.run.auto_config_spaces?n("span",[e._v(" Space assignment at runtime ")]):n("span",[e._v(" Obs Space: "),e.checkSpaceMatch(t.run_config.interfaces.run.observation_space,a.observation_space)?n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Observation Check: Success",expression:"'Observation Check: Success'",modifiers:{hover:!0,top:!0}}]},[n("i",{staticClass:"fa fa-check-square",staticStyle:{color:"green"}})]):n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Observation Check: Failed",expression:"'Observation Check: Failed'",modifiers:{hover:!0,top:!0}}]},[n("i",{staticClass:"fa fa-times-circle",staticStyle:{color:"red"}})]),n("span",{staticClass:"ml-2 mr-2"},[e._v("/")]),e._v(" Action Space: "),e.checkSpaceMatch(t.run_config.interfaces.run.action_space,a.action_space)?n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Action Check: Success",expression:"'Action Check: Success'",modifiers:{hover:!0,top:!0}}]},[n("i",{staticClass:"fa fa-check-square",staticStyle:{color:"green"}})]):n("span",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Action Check: Failed",expression:"'Action Check: Failed'",modifiers:{hover:!0,top:!0}}]},[n("i",{staticClass:"fa fa-times-circle",staticStyle:{color:"red"}})])])]):e._e()])}))],2)],1)],1)],1)],1)})),n("span",[n("b-card",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-select-agent",modifiers:{"modal-select-agent":!0}}],staticClass:"h-100 card-shadow card-flyer  ",staticStyle:{width:"100px","background-color":"#ccc",color:"#000"},attrs:{"body-text-variant":""}},[n("b-card-body",{staticClass:"text-center align-middle"},[n("i",{staticClass:"fa fa-plus"})])],1)],1)],2)],1),n("div",{staticClass:"mt-4"}),Object.keys(e.agents).length>1?n("div",[n("hr"),n("div",{staticClass:"mt-2 mb-3 d-flex justify-content-center"},[n("div",{staticClass:"h-5"},[e._v("Multi-Agent Session Configuration "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-config",modifiers:{"modal-config":!0}}],attrs:{size:"sm",variant:"white"}},[n("i",{staticClass:"fa fa-edit"})])],1)])]):e._e(),n("div",{staticClass:"mt-4"}),n("hr"),n("b-row",[n("b-col",{staticClass:"d-flex justify-content-center"},[e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" Submission Failed: "+e._s(e.errorMessage)+" "),n("div",[n("pre",{staticClass:"error"},[e._v(e._s(e.traceback))])])]):e._e(),n("div",[e.submitting?n("b-button",{attrs:{variant:"primary",disabled:""}},[n("b-spinner",{attrs:{small:"",type:"grow"}}),e._v("Processing... ")],1):n("b-button",{attrs:{disabled:!e.readyForSubmit,size:"sm",variant:"primary"},on:{click:e.sendData}},[e._v("Submit")]),n("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return e.showFullConfig()}}},[e._v("View Config Output")])],1)],1)],1)],1)],1)],1),n("HelpInfo",{attrs:{contentId:"agentenv"}})],1)},s=[],i=(n("a623"),n("4160"),n("d81d"),n("a9e3"),n("b64b"),n("07ac"),n("159b"),n("8785")),r=n("bc3a"),o=n.n(r),c=n("4023"),l=n("9530"),d=n.n(l),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{attrs:{id:"agentnew",size:"xl","hide-header":!0,"hide-footer":!0}},[n("AgentNew",{attrs:{specId:e.selectedSpecId},on:{agentCreated:function(t){return e.agentCreated(t)}}})],1),n("b-modal",{attrs:{id:"agentspecs",size:"xl","hide-header":!0,"hide-footer":!0}},[n("AgentSpecs",{on:{specSelected:function(t){return e.newAgentModal(t)}}})],1),n("b-button-toolbar",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:agentspecs",arg:"agentspecs"}],attrs:{target:"_blank",variant:"info",size:"sm"}},[e._v("New Agent Instance")]),n("b-button",{staticClass:"ml-auto",attrs:{variant:"secondary",size:"sm"},on:{click:function(t){return e.refreshAgents()}}},[e._v("Refresh List ")]),n("b-form-input",{staticClass:"ml-auto",staticStyle:{width:"250px"},attrs:{placeholder:"Search"},model:{value:e.searchtext,callback:function(t){e.searchtext=t},expression:"searchtext"}})],1),n("div",{staticClass:"mt-4"}),e._l(e.agents,(function(t,a){return n("div",{key:a},[n("AgentRowSelect",{attrs:{agent:t},on:{click:function(n){return e.selectAgent(t)}}}),n("hr")],1)}))],2)},p=[],v=(n("4de4"),n("caad"),n("b0c0"),n("2532"),n("bbd0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.agent&&e.agent.ident?n("div",[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"2"}},[n("img",{staticStyle:{"max-height":"60px"},attrs:{src:"/img/agent_spec_icons/agent_"+e.getImageId(e.agent.specId)+".png",alt:"Image"}})]),n("b-col",[n("b-row",[n("b-col",[n("div",[n("router-link",{attrs:{target:"_blank",to:"/agent/view/"+e.agent.ident}},[e._v(" "+e._s(e.agent.ident)+" "),e.agent.name?n("span",[e._v("("+e._s(e.agent.name)+")")]):e._e()])],1)]),n("b-col",{attrs:{cols:"2"}},[n("div",[n("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(t){return e.select()}}},[e._v("Select")])],1)])],1),n("div",{staticClass:"mt-1"}),n("b-row",{staticClass:"small"},[n("b-col",[n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Spec Id: ")]),n("span",[e._v(e._s(e.agent.specId))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("created: ")]),n("span",[e._v(e._s(e.agent.created))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Tags: ")]),n("span",[e._v(e._s(e.agent.tags.edges.map((function(e){return e.node.tagId})).join(", ")))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Notes: ")]),n("span",[e._v(e._s(e.agent.notes))])])]),n("b-col",[e.agent.configParsed.interfaces.run.auto_config_spaces?n("span",[n("span",{staticClass:"data_label mt-1"},[e._v("Observation Space ")]),e._v(" assigned at runtime. "),n("br"),n("span",{staticClass:"data_label mt-1"},[e._v("Action Space: ")]),e._v(" assigned at runtime. ")]):n("div",[n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Observation Space: ")]),n("span",[n("SpaceInfo",{attrs:{space:e.agent.configParsed.interfaces.run.observation_space}})],1)]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Action Space: ")]),n("span",[n("SpaceInfo",{attrs:{space:e.agent.configParsed.interfaces.run.action_space}})],1)])])])],1)],1)],1)],1):e._e()}),g=[],f=n("9b39"),b={components:{SpaceInfo:f["a"]},props:{agent:Object},data:function(){return{}},mounted:function(){},methods:{select:function(){this.$emit("click")}},computed:{lastCheckpoint:function(){return this.agent&&this.agent.lastCheckpoint?JSON.parse(this.agent.lastCheckpoint).id:"NA"},config:function(){return JSON.parse(this.agent.config)},meta:function(){return JSON.parse(this.agent.meta)}},created:function(){},beforeDestroy:function(){}},h=b,m=n("2877"),_=Object(m["a"])(h,v,g,!1,null,"37d3fcc4",null),S=_.exports,y=n("3812"),C=n("c5bd");function k(){var e=Object(i["a"])(["\n  {\n    allAgents {\n      edges {\n        node {\n          id\n          ident\n          name\n          created\n          specId\n          notes\n            tags {\n            edges {\n                node {\n                id\n                tagId\n                }\n            }\n            }\n          config\n          configParsed\n          status\n        }\n      }\n    }\n  }\n"]);return k=function(){return e},e}function w(){var e=Object(i["a"])(["\n  query {\n    agentSpecs {\n      id\n      ident\n      created\n      displayedName\n      config\n      params\n    }\n  }\n"]);return w=function(){return e},e}var I=d()(w()),x=d()(k()),A={components:{AgentRowSelect:S,AgentSpecs:y["a"],AgentNew:C["a"]},props:{},apollo:{agentSpecs:I,allAgents:x},data:function(){return{allAgents:[],selectedExistingAgent:null,selectedSpecId:null,searchtext:""}},mounted:function(){},methods:{agentCreated:function(e){this.$bvModal.hide("agentnew"),this.refreshAgents()},newAgentModal:function(e){this.selectedSpecId=e,this.$bvModal.hide("agentspecs"),this.$bvModal.show("agentnew")},selectAgent:function(e){this.$emit("click",e.ident)},refreshAgents:function(){this.$apollo.queries.allAgents.refetch()}},computed:{agents:function(){var e=this;if(0==this.allAgents.length)return[];var t=this.allAgents.edges.map((function(e){return e.node}));return""!=this.searchtext?t.filter((function(t){for(var n=[t.displayedName,t.name,t.specId],a=!1,s=0,i=n;s<i.length;s++){var r=i[s];if(null!=r&&r.toLowerCase().includes(e.searchtext.toLowerCase())){a=!0;break}}return a})).sort((function(e,t){return new Date(t.created)-new Date(e.created)})):t.sort((function(e,t){return new Date(t.created)-new Date(e.created)}))}},created:function(){},beforeDestroy:function(){}},N=A,O=Object(m["a"])(N,u,p,!1,null,"1048c27e",null),E=O.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"mt-2"}),n("b-form-input",{staticClass:"ml-auto",staticStyle:{width:"250px"},attrs:{placeholder:"Search"},model:{value:e.searchtext,callback:function(t){e.searchtext=t},expression:"searchtext"}}),n("div",{staticClass:"mt-1"}),n("b-pagination",{attrs:{"total-rows":e.totalCount,"per-page":e.pageSize},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),n("b-container",{attrs:{fluid:""}},e._l(e.envSpecListPage,(function(t,a){return n("div",{key:a},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"3"}},[n("div",{staticClass:"mt-2"},[n("router-link",{attrs:{to:"/env_spec/view/"+t.ident}},[e._v(" "+e._s(t.displayedName))])],1),n("b-card-img",{staticClass:"mt-1",staticStyle:{width:"100px"},attrs:{src:e.appConfig.API_URL+"/api/env_preview_image/"+t.ident,alt:""}})],1),n("b-col",[n("div",{staticClass:"mt-3"}),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Environment: ")]),n("span",[e._v(e._s(t.environment.ident))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Version: ")]),n("span",[e._v(e._s(t.environment.version))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Extension: ")]),n("span",[e._v(e._s(t.environment.extensionId)+": "+e._s(t.environment.extensionVersion))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Type: ")]),n("span",[e._v(e._s(t.envType))])]),n("div",[n("span",{staticClass:"data_label mt-1"},[e._v("Description: ")]),n("span",[e._v(e._s(t.description))])])]),n("b-col",{attrs:{cols:"2"}},[n("div",{staticClass:"mt-3"}),n("div",[n("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(n){return e.select(t.ident)}}},[e._v("Select")])],1)])],1),n("hr")],1)})),0),n("b-pagination",{attrs:{"total-rows":e.totalCount,"per-page":e.pageSize},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),n("div",{staticClass:"mt-2"})],1)},M=[];n("fb6a");function $(){var e=Object(i["a"])(["\n  query {\n    envSpecs {\n      id\n      ident\n      displayedName\n      config\n      meta\n      \n      envType\n      description\n      environment{\n          id\n          ident\n          extensionId\n            version\n            extensionVersion\n            disabled\n      }\n    }\n  }\n"]);return $=function(){return e},e}var T=d()($()),R={props:{},apollo:{envSpecs:T},data:function(){return{envSpecs:[],selectedExistingAgent:null,searchtext:"",pageSize:12,currentPage:1}},mounted:function(){},methods:{select:function(e){this.$emit("click",e)}},computed:{envSpecList:function(){var e=this;return 0==this.envSpecs.length?[]:""!=this.searchtext?this.envSpecs.filter((function(t){return!t.environment.disabled&&t.displayedName.toLowerCase().includes(e.searchtext.toLowerCase())})):this.envSpecs.filter((function(e){return!e.environment.disabled}))},totalCount:function(){return this.envSpecList.length},envSpecListPage:function(){return this.envSpecList.slice(parseInt((this.currentPage-1)*this.pageSize),parseInt(this.currentPage*this.pageSize))}},created:function(){},beforeDestroy:function(){}},L=R,z=Object(m["a"])(L,P,M,!1,null,"09a5d99d",null),j=z.exports,F=n("321f"),q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("div"):e._e(),n("div",[e._v(" Task ID: "),n("router-link",{attrs:{to:"/task/view/"+e.uid}},[e._v(e._s(e.uid))])],1),"RUNNING"==e.task.status?n("div",[e._v(" Loading... ")]):n("div",[e._v(" Status: "+e._s(e.task.status)+" ")]),n("div",[n("LogViewer",{attrs:{nocard:!0,logStreamUrl:e.appConfig.API_URL+"/api/stream/entity_logs/task/"+e.uid}})],1)])},D=[],J=n("1577");function V(){var e=Object(i["a"])(["\n  query GetTask($ident: String!) {\n    task(ident: $ident) {\n      id\n      ident\n      status\n      statusMsg\n      config\n      created\n      summary\n      primarySession{\n          id\n          ident\n      }\n     \n    }\n  }\n"]);return V=function(){return e},e}var U=d()(V()),G={name:"TaskLoad",components:{LogViewer:J["a"]},apollo:{task:{query:U,variables:function(){return{ident:this.uid}},pollInterval:2e3}},data:function(){return{task:{},error:null,appConfig:c["a"],intervalTimer:null}},props:{uid:String,redirectToSession:Boolean},created:function(){var e=this;console.log(this.uid),this.intervalTimer=setInterval((function(){console.log("Checking"),null==e.uid&&(e.error=":( Bee Boop (Oops!) Task creation seems to have failed, but may actually be running. Please check your task list."),e.$apollo.queries.task.loading||(e.task.status&&"RUNNING"==e.task.status?e.task.primarySession&&e.task.primarySession.ident?e.$router.push({path:"/session/view/"+e.task.primarySession.ident}):(console.log("Refetch"),e.$apollo.queries.task.refetch()):e.task.status&&"RUNNING"!=e.task.status&&"CREATED"!=e.task.status&&e.$router.push({path:"/task/view/"+e.task.ident}))}),1e3)},beforeDestroy:function(){this.intervalTimer&&clearInterval(this.intervalTimer)}},B=G,K=Object(m["a"])(B,q,D,!1,null,null,null),W=K.exports;function Y(){var e=Object(i["a"])(["\n  query GetAgent($ident: String!) {\n    agent(ident: $ident) {\n        id\n          ident\n          name\n          created\n          specId\n          config\n            spec{\n                id\n                params\n                displayedName\n            }\n    }\n  }\n"]);return Y=function(){return e},e}function H(){var e=Object(i["a"])(["\n  query GetTask($ident: String!) {\n    task(ident: $ident) {\n      id\n      ident\n      specId\n      config\n    }\n  }\n"]);return H=function(){return e},e}function X(){var e=Object(i["a"])(["\n  query GetEnvSpec($ident: String!) {\n    envSpec(ident: $ident) {\n      id\n      ident\n      displayedName\n      config\n      meta\n      envType\n      environment {\n          id\n        ident\n      }\n    }\n  }\n"]);return X=function(){return e},e}function Q(){var e=Object(i["a"])(["\n  {\n    wrappers: envWrappers {\n      entry_point\n      kwargs\n    }\n  }\n"]);return Q=function(){return e},e}var Z=[{key:"max_episodes",label:"Max Episodes",description:"Max Episodes before Termination",defaultValue:null,type:"number"},{key:"max_steps",label:"Max Steps",description:"Max Steps before Termination",defaultValue:null,type:"number"},{key:"max_steps_in_episode",label:"Max Steps per Episode",description:"Max Steps per Episode",defaultValue:null,type:"number"},{key:"episode_record_freq",label:"Ep Record Freq",description:"Frequency of Episode Recordings",defaultValue:50,type:"number"},{key:"episode_record_preview_interval",label:"Episode Record Preview Interval",description:"Interval for preview generation",defaultValue:1,type:"number",isNumber:!1},{key:"step_log_freq",label:"Step Log Freq",description:"Frequency of Step Logging",defaultValue:30,type:"number"},{key:"episode_log_freq",label:"Episode Log Freq",description:"Frequency of Episode Summary Logging",defaultValue:1,type:"number"},{key:"preview_rendering",label:"Use Preview Rendering",description:"Enable Preview Rendering using environment render function",defaultValue:!0,type:"boolean"},{key:"frame_stream_enabled",label:"Enable Live Frame Stream",description:"Enable Live Frame Stream (preview rendering must also be enabled)",defaultValue:!0,type:"boolean"},{key:"inference_only",label:"Inference Only",description:"Inference Only (Disables training if possible)",defaultValue:!1,type:"boolean"}],ee=[{key:"max_epochs",label:"Max Epochs",description:"Max Epochs before Termination",defaultValue:null,type:"number"},{key:"max_batches",label:"Max Batches",description:"Max Batches before Termination",defaultValue:null,type:"number"}];function te(e){var t={};return e.forEach((function(e){t[e.key]=e.defaultValue})),t}var ne=d()(Q()),ae=d()(X()),se=d()(H()),ie=d()(Y()),re={name:"AgentTaskNew",components:{AgentSelector:E,EnvSelector:j,TaskLoad:W,ParamEditor:F["a"],SpaceInfo:f["a"]},apollo:{wrappers:ne,envSpec:{query:ae,skip:!0,variables:function(){return{ident:this.selectedEnvSpecId}}}},data:function(){return{appConfig:c["a"],selectedEnvSpecId:null,envSpec:null,envSpecKwargOverrides:"{}",batchSize:1,agents:{},agentConfigs:{},currentAgentIdx:null,selectedAgent:null,agentWrappers:[],agentRunConfig:{},agentSessionConfig:{},agentSessionConfigFields:[],wrappers:[],currentPlayerId:null,envPlayers:[],envMeta:{},errorMessage:"",traceback:"",submitting:!1,newTaskId:null,rlSessionConfigFields:Z,dataSessionConfigFields:ee,sessionConfig:te(Z),fullConfig:"{}"}},props:{taskId:String,agentUid:String,envSpecId:String},computed:{readyForSubmit:function(){return Object.keys(this.agents).length>0&&null!=this.envSpec},wrapperOptions:function(){return this.wrappers.map((function(e,t){return{value:t,text:e["entry_point"]}}))},selectedAgentParams:function(){return this.selectedAgent&&this.selectedAgent.spec?JSON.parse(this.selectedAgent.spec.params):null}},watch:{wrappers:function(e){this.wrappers=e},envSpec:function(e){this.envSpec=e,this.envSpec&&(this.envMeta=JSON.parse(this.envSpec.meta),null==this.taskId&&(this.envSpecKwargOverrides=JSON.stringify(JSON.parse(this.envSpec.config).env_kwargs,null,2)),this.resetPlayers())}},methods:{checkSpaceMatch:function(e,t){return null==e||null==t?null:JSON.stringify(e)==JSON.stringify(t)},showFullConfig:function(){this.fullConfig=JSON.stringify(this.prepData(),null,2),this.$bvModal.show("modal-full-config")},agentConfigModal:function(e){this.currentAgentIdx=e;var t=this.agents[this.currentAgentIdx];this.selectedAgent=t,this.agentSessionConfigFields=t["session_config_fields"],this.agentWrappers=t["wrappers"],this.agentRunConfig=t["run_config"],this.agentSessionConfig=t["session_config"],this.$bvModal.show("modal-configure-agent")},updateAgentConfig:function(){var e=this.agents[this.currentAgentIdx];e["wrappers"]=this.agentWrappers,e["session_config"]=this.agentSessionConfig,e["run_config"]=this.agentRunConfig,e["config"]=this.selectedAgentConfig,this.$set(this.agents,e.ident,e),this.$bvModal.hide("modal-configure-agent")},selectEnvSpec:function(e){this.$bvModal.hide("modal-select-envspec"),this.selectedEnvSpecId=e,this.$apollo.queries.envSpec.skip=!1,this.$apollo.queries.envSpec.refetch()},selectAgent:function(e){if(console.log("Select Agent"),console.log(JSON.stringify(e)),Object.keys(this.agents).every((function(t){return t!=e.ident}))){this.$set(this.agents,e.ident,e),e["run_config"]=JSON.parse(e.config),console.log(JSON.stringify(e["run_config"],null,2)),e["interface_type"]=e["run_config"]["interfaces"]["run"]["interface_type"];var t="rl"==e["interface_type"]?this.rlSessionConfigFields:this.dataSessionConfigFields;e["session_config"]=te(t),e["session_config_fields"]=t,e["wrappers"]=[],this.autoAssign(),this.$bvModal.hide("modal-select-agent")}},assignPlayerModal:function(e){console.log(e),this.currentPlayerId=e,this.$bvModal.show("assign-player-modal")},assignPlayerToAgent:function(e,t){this.$set(this.envPlayers[e],"agent",t),this.$bvModal.hide("assign-player-modal")},getPlayersForAgent:function(e){var t=[];return this.envPlayers.forEach((function(n){n.agent==e&&t.push(n.id)})),0==t.length&&t.push("None"),t},getPlayersDataForAgent:function(e){var t=[];return this.envPlayers.forEach((function(n){n.agent==e&&t.push(n)})),t},resetPlayers:function(){if(this.envSpec&&"possible_players"in this.envMeta){var e=this.envMeta,t=[];e.possible_players.forEach((function(n){var a={id:n,observation_space:e.observation_spaces[n],action_space:e.action_spaces[n]};t.push(a)})),this.envPlayers=t,this.autoAssign()}else this.envPlayers=[]},prepData:function(){var e=this;try{var t=[];Object.values(this.agents).forEach((function(n){var a={};a["ident"]=n.ident,a["run_config"]=n.run_config,a["session_config"]=n.session_config,a["session_config"]["wrappers"]=n.wrappers.map((function(t){return e.wrappers[t]})),n.session_config_fields.forEach((function(e){"number"==e.type&&(a["session_config"][e.key]=Number(a["session_config"][e.key]))})),t.push(a)})),this.rlSessionConfigFields.forEach((function(t){"number"==t.type&&(e.sessionConfig[t.key]=Number(e.sessionConfig[t.key]))}));var n={};this.envPlayers.forEach((function(e){n[e.id]=e.agent}));var a={agents:t,env_spec_id:this.envSpec.ident,env_kwargs:JSON.parse(this.envSpecKwargOverrides),session_config:this.sessionConfig,player_assignments:n,batch_size:parseInt(this.batchSize)};return console.log("SENDING "+JSON.stringify(a)),a}catch(s){return{error:s}}},sendData:function(){var e=this;this.submitting=!0,console.log("sending data");try{var t=this.prepData();o.a.post("".concat(c["a"].API_URL,"/api/submit_agent_task"),t).then((function(t){var n=t.data["item"];"uid"in n?(e.newTaskId=n.uid,null!=e.newTaskId?e.$bvModal.show("modal-launch-task"):e.errorMessage=":( Bee Boop (Oops!) Task creation seems to have failed, but may actually be running. Please check your task list."):(console.log("ERROR in response "+JSON.stringify(n)),e.errorMessage=JSON.stringify(n["error"])),e.traceback=n["traceback"],e.submitting=!1})).catch((function(e){var t="Task creation seems to have failed: "+e;console.log(t),this.errorMessage=t,this.submitting=!1}))}catch(n){console.log("ERROR "+n),this.error=n,this.submitting=!1}},loadTaskInfo:function(){null!=this.taskId&&console.log("TODO")},loadAgent:function(e){var t=this;console.log("Preloading agent "+e),this.$apollo.query({query:ie,variables:{ident:e}}).then((function(e){console.log(e),t.selectAgent(e.data.agent)})).catch((function(e){t.error="ERROR GETTING AGENT  "+e,console.log(t.error)}))},duplicateTask:function(e){var t=this;console.log("Preloading task "+e),this.$apollo.query({query:se,variables:{ident:e}}).then((function(e){var n=JSON.parse(e.data.task.config);n.agents?n.agents.forEach((function(e){return t.loadAgent(e.ident)})):t.loadAgent(n.agent_id),t.selectEnvSpec(n.env_spec_id),t.sessionConfig=n["session_config"],t.envSpecKwargOverrides=JSON.stringify(n["env_kwargs"],null,2)})).catch((function(n){t.error="ERROR GETTING TASK with id "+e,console.log(t.error)}))},removeAgent:function(){this.$delete(this.agents,this.currentAgentIdx),this.$bvModal.hide("modal-configure-agent"),this.autoAssign()},autoAssign:function(){var e=this;if(0!=this.envPlayers.length&&0!=this.agents.length){var t=Object.keys(this.agents).map((function(e,t){return e}));this.envPlayers.forEach((function(n,a){console.log("p "+a+" agent: "+t),e.$set(e.envPlayers[a],"agent",t[a%t.length])}))}}},created:function(){this.submitting=!1,console.log("Env Spec Id "+this.envSpecId),console.log("Agent UID: "+this.agentUid),console.log("Task UID: "+this.taskId),this.taskId&&this.duplicateTask(this.taskId),this.envSpecId&&this.selectEnvSpec(this.envSpecId),this.agentUid&&this.loadAgent(this.agentUid)}},oe=re,ce=(n("a569"),Object(m["a"])(oe,a,s,!1,null,"158a0f8e",null));t["default"]=ce.exports},a551:function(e,t,n){},a569:function(e,t,n){"use strict";var a=n("a551"),s=n.n(a);s.a},a623:function(e,t,n){"use strict";var a=n("23e7"),s=n("b727").every,i=n("a640"),r=n("ae40"),o=i("every"),c=r("every");a({target:"Array",proto:!0,forced:!o||!c},{every:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},a9e3:function(e,t,n){"use strict";var a=n("83ab"),s=n("da84"),i=n("94ca"),r=n("6eeb"),o=n("5135"),c=n("c6b6"),l=n("7156"),d=n("c04e"),u=n("d039"),p=n("7c73"),v=n("241c").f,g=n("06cf").f,f=n("9bf2").f,b=n("58a8").trim,h="Number",m=s[h],_=m.prototype,S=c(p(_))==h,y=function(e){var t,n,a,s,i,r,o,c,l=d(e,!1);if("string"==typeof l&&l.length>2)if(l=b(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,s=49;break;case 79:case 111:a=8,s=55;break;default:return+l}for(i=l.slice(2),r=i.length,o=0;o<r;o++)if(c=i.charCodeAt(o),c<48||c>s)return NaN;return parseInt(i,a)}return+l};if(i(h,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var C,k=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof k&&(S?u((function(){_.valueOf.call(n)})):c(n)!=h)?l(new m(y(t)),n,k):y(t)},w=a?v(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;w.length>I;I++)o(m,C=w[I])&&!o(k,C)&&f(k,C,g(m,C));k.prototype=_,_.constructor=k,r(s,h,k)}},c5bd:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.agentSpec?n("div",[n("b-modal",{attrs:{id:"selectsnapshot",size:"xl",scrollable:"","hide-header":!0,"hide-footer":!1}},[n("div",{staticClass:"text-center mt-4"},[n("div",{staticClass:"mt-4"}),e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errorMessage)+": "),n("pre",{staticStyle:{"background-color":"inherit"}},[e._v(e._s(e.traceback))])]):e._e(),e.snapshotId?n("span",{staticClass:"h4 mt-4"},[n("i",{staticClass:"fa fa-camera"}),e._v(" Selected Snapshot: "),n("b",[e._v(e._s(e.snapshotId))])]):n("span",{staticClass:"h4 mt-4"},[e._v(" No snapshot selected. A new agent will be created using the default parameters. ")])],1),n("div",{staticClass:"mt-4 ml-4 mb-4"},[n("b-form-radio",{attrs:{value:null,name:"xxx"},model:{value:e.snapshotId,callback:function(t){e.snapshotId=t},expression:"snapshotId"}},[e._v("None")])],1),n("b-tabs",[n("b-tab",{attrs:{title:"Local Snapshots",active:""}},[n("div",{staticClass:"mt-4 overflow-auto"},[n("SnapshotSelector",{attrs:{specId:e.agentSpec.ident},model:{value:e.snapshotId,callback:function(t){e.snapshotId=t},expression:"snapshotId"}})],1)]),n("b-tab",{attrs:{title:"Community Hub Snapshots"}},[n("div",{staticClass:"mt-4 overflow-auto"},[n("SnapshotSelector",{attrs:{specId:e.agentSpec.ident,online:!0},model:{value:e.snapshotId,callback:function(t){e.snapshotId=t},expression:"snapshotId"}})],1)])],1)],1),n("h3",[e._v("New Agent Instance")]),n("div",{staticClass:"mt-4"}),e.$apollo.queries.agentSpec.loading?e._e():n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"4"}},[n("b-card-img",{staticStyle:{"max-width":"200px"},attrs:{src:"/img/agent_spec_icons/agent_"+e.getImageId(e.agentSpec.ident)+".png",alt:"Image"}})],1),n("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[n("div",[e._v("Agent Spec:")]),n("div",[e._v("Extension ID:")]),n("div",[e._v("Version:")])]),n("b-col",[n("div",[n("span",[n("router-link",{attrs:{to:"/agent_spec/"+e.agentSpec.ident}},[e._v(e._s(e.agentSpec.displayedName))])],1)]),n("div",[n("span",[e._v(e._s(e.agentSpec.extensionId))])]),n("div",[n("span",[e._v(e._s(e.agentSpec.version))])])])],1),n("div",{staticClass:"mt-2"}),n("b-row",[n("b-col",{staticClass:"text-right",attrs:{cols:"4"}}),n("b-col",[n("div",[n("span",[e._v(e._s(e.agentSpec.description))])])])],1),n("div",{staticClass:"mt-4"}),n("b-row",[n("b-col",[n("div",[n("b-tabs",{attrs:{"content-class":"mt-3",justified:""}},[n("b-tab",{staticClass:"text-center",attrs:{title:"Create",active:""}},[n("p",[e._v("Create an agent with default parameters or select one from an existing snapshot.")]),n("b-row",{staticClass:"mt-4 ml-4 mb-4 "},[n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:selectsnapshot",arg:"selectsnapshot"}],staticClass:"mr-4",attrs:{variant:"info",size:"sm"}},[e._v("Select an Agent Snapshot")])],1),n("b-col",[n("b-form-radio",{staticClass:"mt-2",attrs:{value:null,name:"xxx"},model:{value:e.snapshotId,callback:function(t){e.snapshotId=t},expression:"snapshotId"}},[e._v("New Agent with default parameters.")])],1)],1),n("div",{staticClass:"text-center mt-4"},[n("div",{staticClass:"mt-4"}),e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errorMessage)+" "),e.traceback?n("pre",{staticStyle:{"background-color":"inherit"}},[e._v(e._s(e.traceback))]):e._e()]):e._e(),e.snapshotId?n("span",{staticClass:"h4 mt-4"},[n("i",{staticClass:"fa fa-camera"}),e._v(" Selected Snapshot"),n("br"),e._v(" "),n("b",[e._v(e._s(e.snapshotId))])]):n("span",{staticClass:"h4 mt-4"},[e._v(" No snapshot selected. A new agent will be created using the default parameters. ")])],1)],1),n("b-tab",{attrs:{title:"Create with Agent Builder"}},[e.params?n("div",[n("div",{staticClass:"ml-3"},[n("ParamEditor",{ref:"peditor",attrs:{params:e.params,values:e.initParamValues},on:{update:function(t){return e.saveParams(t)}}})],1)]):n("div",[e._v(" Agent Builder not supported by this Agent Spec ")]),n("div",{staticClass:"mt-4"}),e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errorMessage)+": "),n("pre",{staticStyle:{"background-color":"inherit"}},[e._v(e._s(e.traceback))])]):e._e()],1),n("b-tab",{attrs:{title:"Created from raw config"}},[e.config?n("editor",{attrs:{lang:"json",width:"100%",theme:"chrome",height:"600"},on:{init:e.editorInit},model:{value:e.config,callback:function(t){e.config=t},expression:"config"}}):e._e(),n("div",{staticClass:"mt-4"}),n("div",{staticClass:"mt-4"}),e.errorMessage?n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errorMessage)+": "),n("pre",{staticStyle:{"background-color":"inherit"}},[e._v(e._s(e.traceback))])]):e._e()],1)],1)],1)])],1)],1),n("div",{staticClass:"mt-4"}),n("b-button-toolbar",[n("div",{staticClass:"ml-auto mr-3 my-auto"},[e._v(" Agent Name: ")]),n("b-form-input",{staticClass:"mr-3",staticStyle:{width:"300px"},attrs:{placeholder:"Enter name or one will be assigned"},model:{value:e.agentName,callback:function(t){e.agentName=t},expression:"agentName"}}),e.submitting?n("b-button",{attrs:{size:"sm",variant:"primary",disabled:""}},[n("b-spinner",{attrs:{small:"",type:"grow"}}),e._v("Processing... ")],1):n("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:e.submit}},[e._v("Create Instance")])],1)],1):e._e()},s=[],i=(n("498a"),n("5530")),r=n("8785"),o=n("bc3a"),c=n.n(o),l=n("4023"),d=(n("bbd0"),n("9530")),u=n.n(d),p=n("321f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("b-alert",{attrs:{variant:"danger"}},[e._v(e._s(e.error))]):e._e(),n("b-form-group",[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{cols:"1"}}),n("b-col",{staticClass:"h4",attrs:{cols:"4"}},[e._v(" Snapshot Info ")]),n("b-col",[n("div",{staticClass:"h4"},[e._v("Environment Stats: ")]),n("b-row",{staticClass:"h6 mb-0 pb-0"},[n("b-col",{attrs:{cols:"4"}},[e._v(" Environment Spec ID ")]),n("b-col",[e._v(" Steps ")]),n("b-col",[e._v(" Episodes ")]),n("b-col",[e._v(" Reward ")]),n("b-col",[e._v(" Sessions ")])],1)],1)],1),n("hr"),e.loading?n("div",[e._v(" Loading... ")]):null==e.snapshots||0==Object.keys(e.snapshots).length?n("div",[e._v(" No snapshots found ")]):e._e(),e._l(e.snapshots,(function(t,a){return n("div",{key:a},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"1"}},[n("b-form-radio",{attrs:{name:"xxx",value:t.snapshot_id},on:{change:function(n){return e.select(t.snapshot_id)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),n("b-col",[n("span",{staticClass:"h4"},[e._v(e._s(t.id)+" - "+e._s(t.seed)+" - "+e._s(t.snapshot_version))])])],1),n("b-row",[n("b-col",{attrs:{cols:"1"}}),n("b-col",{attrs:{cols:"4"}},[e.online?e._e():n("div",[t.published?n("span",[n("i",{staticClass:"fa fa-cloud"}),e._v(" Published")]):n("span",[n("i",{staticClass:"fa fa-hdd"}),e._v(" Not Published")])]),n("div",[n("span",[e._v("Created by: "+e._s(t.submitter_id))])]),n("div",[n("span",[e._v(e._s(t.snapshot_description))])])]),n("b-col",{},[null==t.env_stats||0==Object.keys(t.env_stats).length?n("div",[e._v(" No Stats Found ")]):n("div",e._l(t.env_stats,(function(t,a){return n("div",{key:a},[n("b-row",[n("b-col",{attrs:{cols:"4"}},[e._v(" "+e._s(a)+" ")]),n("b-col",[e._v(" "+e._s(t["step_count"])+" ")]),n("b-col",[e._v(" "+e._s(t["episode_count"])+" ")]),n("b-col",[e._v(" "+e._s(t["best_ep_reward_total"])+" ")]),n("b-col",[e._v(" "+e._s(t["session_count"])+" ")])],1)],1)})),0)])],1),n("hr")],1)}))],2)],1)],1)},g=[],f=(n("99af"),n("9b39"),{props:{specId:String,online:{type:Boolean,default:!1}},components:{},data:function(){return{snapshots:[],error:null,selected:null,loading:!0}},mounted:function(){},methods:{loadLocalData:function(){var e=this;console.log("Loading local snapshots"),this.error=null,this.loading=!0,c.a.get("".concat(l["a"].API_URL,"/api/snapshots/list/").concat(this.specId)).then((function(t){e.snapshots=t.data["items"],e.loading=!1})).catch((function(t){e.error=t,e.loading=!1}))},loadOnlineData:function(){var e=this;console.log("Loading online snapshots"),this.error=null,this.loading=!0,c.a.get("".concat(l["a"].API_URL,"/api/snapshots/public/list/spec_id/").concat(this.specId)).then((function(t){e.snapshots=t.data["items"],e.loading=!1})).catch((function(t){e.error=t,e.loading=!1}))},loadData:function(){1==this.online?this.loadOnlineData():this.loadLocalData()},select:function(e){console.log(e),this.$emit("input",e)}},computed:{},created:function(){this.loadData()},beforeDestroy:function(){}}),b=f,h=n("2877"),m=Object(h["a"])(b,v,g,!1,null,"0b6715a4",null),_=m.exports;function S(){var e=Object(r["a"])(["\n  query GetAgentSpec($ident: String!) {\n    agentSpec(ident: $ident) {\n      id\n      ident\n      displayedName\n      description\n      extensionId\n      version\n      config\n      params\n    }\n  }\n"]);return S=function(){return e},e}var y=u()(S()),C={components:{editor:n("7c9e"),SnapshotSelector:_,ParamEditor:p["a"]},apollo:{agentSpec:{query:y,variables:function(){return{ident:this.specId}}}},data:function(){return{agentSpec:{},options:{},config:"",code:"",paramValues:{},submitting:!1,snapshotId:null,snapshot_version:"0",snapshot_description:"",errorMessage:null,agentName:null}},props:{specId:String},computed:{params:function(){return this.agentSpec?JSON.parse(this.agentSpec.params):null},initParamValues:function(){return this.agentSpec.config?JSON.parse(this.agentSpec.config):null}},methods:{editorInit:function(){n("2099"),n("be9d"),n("818b"),n("0329"),n("95b8"),n("79fb"),n("6a21")},cancel:function(){},onError:function(){},selectSnapshot:function(e){this.$bvModal.hide("modal-selectsnapshot"),this.snapshotId=e},submit:function(){var e=this;null!=this.agentName&&""==this.agentName.trim()&&(this.agentName=null);var t={config:JSON.parse(this.config),specId:this.specId,snapshotId:this.snapshotId,name:this.agentName};c.a.post("".concat(l["a"].API_URL,"/api/new_agent_submit"),t).then((function(t){var n=t.data["item"];"uid"in n?e.$emit("agentCreated",n.uid):(console.log("ERROR in response "+JSON.stringify(n)),e.errorMessage=JSON.stringify(n["error"])),e.traceback=n["traceback"],e.submitting=!1})).catch((function(e){this.errorMessage=e,this.submitting=!1}))},saveParams:function(e){this.paramValues=e,this.config=JSON.stringify(Object(i["a"])(Object(i["a"])({},JSON.parse(this.config)),this.paramValues),null,2)}},watch:{agentSpec:function(e){this.agentSpec=e,this.agentSpec.config&&(this.config=JSON.stringify(JSON.parse(this.agentSpec.config),null,2))}},created:function(){}},k=C,w=(n("7369"),Object(h["a"])(k,a,s,!1,null,"6579e9fe",null));t["a"]=w.exports},d643:function(e,t,n){}}]);
//# sourceMappingURL=chunk-3ace34a3.6577d8b0.js.map